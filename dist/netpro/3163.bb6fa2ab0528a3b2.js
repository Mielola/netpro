"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3163],{3163:(I,f,l)=>{l.r(f),l.d(f,{default:()=>E});var a=l(10467),m=l(60177),s=l(89417),p=l(88834),k=l(99213),h=l(9159),g=l(31849),v=l(16778),t=l(54438),u=l(3154),x=l(93943),b=l(21626);let F=(()=>{class r{constructor(n){this.http=n,this.apiUrl=x.c.apiUrl}getLinkBlock(){var n=this;return(0,a.A)(function*(){return yield u.A.get(n.apiUrl+"api-netpro/api/mikrotik/get-web-block").then(function(){var e=(0,a.A)(function*(o){return o.data});return function(o){return e.apply(this,arguments)}}()).catch(function(){var e=(0,a.A)(function*(o){return o});return function(o){return e.apply(this,arguments)}}())})()}postLink(n){var e=this;return(0,a.A)(function*(){return yield u.A.post(e.apiUrl+"api-netpro/api/mikrotik/web-block",n).then(function(){var o=(0,a.A)(function*(i){return i.data});return function(i){return o.apply(this,arguments)}}()).catch(function(){var o=(0,a.A)(function*(i){return console.log(i),i});return function(i){return o.apply(this,arguments)}}())})()}deleteLink(n){var e=this;return(0,a.A)(function*(){return yield u.A.delete(`${e.apiUrl}api-netpro/api/mikrotik/web-unblock/${n}`).then(function(){var o=(0,a.A)(function*(i){return i.data});return function(i){return o.apply(this,arguments)}}()).catch(function(){var o=(0,a.A)(function*(i){console.log(i)});return function(i){return o.apply(this,arguments)}}())})()}static{this.\u0275fac=function(e){return new(e||r)(t.KVO(b.Qq))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var y=l(75351),w=l(46601);const j=["userFormTemplate"];function L(r,c){1&r&&(t.j41(0,"small"),t.EFF(1,"Domain tidak valid. Pastikan formatnya benar (contoh: example.com)."),t.k0s())}function A(r,c){if(1&r&&(t.j41(0,"div",31),t.DNE(1,L,2,0,"small",32),t.k0s()),2&r){let n;const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(n=e.linkForm.get("domain"))||null==n.errors?null:n.errors.invalidDomain)}}function B(r,c){if(1&r){const n=t.RV6();t.j41(0,"h2",11),t.EFF(1,"Link Form"),t.k0s(),t.j41(2,"h3",26),t.EFF(3,"Tambah Link yang Ingin Diblokir"),t.k0s(),t.j41(4,"form",27),t.bIt("ngSubmit",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.onSubmit())}),t.nrm(5,"input",28),t.DNE(6,A,2,1,"div",29),t.j41(7,"button",30),t.EFF(8,"Tambah Link"),t.k0s()()}if(2&r){let n;const e=t.XpG();t.R7$(4),t.Y8G("formGroup",e.linkForm),t.R7$(2),t.Y8G("ngIf",(null==(n=e.linkForm.get("domain"))?null:n.invalid)&&((null==(n=e.linkForm.get("domain"))?null:n.touched)||(null==(n=e.linkForm.get("domain"))?null:n.dirty)))}}function C(r,c){if(1&r){const n=t.RV6();t.j41(0,"tr",33)(1,"th",34)(2,"div",35)(3,"div",36),t.EFF(4),t.k0s(),t.j41(5,"div",37),t.EFF(6),t.k0s()()(),t.j41(7,"th",24),t.EFF(8),t.k0s(),t.j41(9,"th",24),t.EFF(10),t.k0s(),t.j41(11,"td",38)(12,"a",39),t.bIt("click",function(){const o=t.eBV(n).$implicit,i=t.XpG();return t.Njj(i.deleteLink(o.domain))}),t.nrm(13,"mat-icon",40),t.k0s()()()}if(2&r){const n=c.$implicit;t.R7$(4),t.JRh(n.ip),t.R7$(2),t.JRh(n.ip),t.R7$(2),t.SpI(" ",n.list," "),t.R7$(2),t.SpI(" ",n.comment," ")}}const E=[{path:"",component:(()=>{class r{constructor(n,e,o,i){this.fb=n,this.linkService=e,this.dialog=o,this.fuseConfirmationService=i,this.displayedColumns=["ip","domain","comment"],this.linkForm=this.fb.group({domain:["",[s.k0.required,this.domainValidator]]})}domainValidator(n){return/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,7}$/.test(n.value)?null:{invalidDomain:!0}}openUserForm(){this.dialog.open(this.userFormTemplate,{width:"500px"}).afterClosed().subscribe(e=>{e&&(this.linkForm.valid?console.log("Data yang diterima dari form:",this.linkForm.value):console.error("Form tidak valid:",this.linkForm.errors))})}onSubmit(){var n=this;return(0,a.A)(function*(){if(n.linkForm.valid){const e=new FormData;e.append("domain",n.linkForm.value.domain);const o=yield n.linkService.postLink(e);console.log(o),o&&(n.linkForm.reset(),window.location.reload())}})()}deleteLink(n){var e=this;return(0,a.A)(function*(){e.fuseConfirmationService.open({title:"Konfirmasi Hapus",message:`Apakah Anda yakin ingin menghapus link ${n}?`,actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(function(){var i=(0,a.A)(function*(d){if(d){const D=yield e.linkService.deleteLink(n);console.log(D),window.location.reload()}});return function(d){return i.apply(this,arguments)}}())})()}ngOnInit(){this.listLink=[{ip:"facebook.com",list:"facebook.com",comment:"Blocked by Laravel API"},{ip:"detik.com",list:"blocked-domains",comment:"Blocked by Laravel API"},{ip:"142.251.10.91",list:"blocked_sites",comment:"Dynamic block for youtube.com"},{ip:"103.49.221.211",list:"blocked-domains",comment:"detik.com"},{ip:"203.190.242.211",list:"blocked-domains",comment:"detik.com"},{ip:"157.240.217.35",list:"facebook.com",comment:"facebook.com"}]}static{this.\u0275fac=function(e){return new(e||r)(t.rXU(s.ok),t.rXU(F),t.rXU(y.bZ),t.rXU(w.G))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-block-link"]],viewQuery:function(e,o){if(1&e&&(t.GBs(j,5),t.GBs(v.Sb,5)),2&e){let i;t.mGM(i=t.lsd())&&(o.userFormTemplate=i.first),t.mGM(i=t.lsd())&&(o.modal=i.first)}},standalone:!0,features:[t.aNF],decls:41,vars:1,consts:[["userFormTemplate",""],["fuseCard",""],[1,"w-full","h-fit","overflow-y-auto"],[1,"dark","relative","flex-0","overflow-hidden","bg-[#0576D9]","px-4","py-2","h-64","sm:p-16"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],[1,"w-5/6","h-full","relative","m-auto","-translate-y-15"],[1,"w-full","h-full"],[1,"flex","flex-col","px-8","py-10","shadow-lg","text-center"],[1,"text-xl","font-bold"],[1,"mt-2"],[1,"font-medium"],["id","open-modal","expand","block","mat-flat-button","",1,"bg-green-500","my-5","w-full","text-white",3,"click"],["svgIcon","mat_solid:add_circle"],[1,"mb-5"],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","h-fit","w-full","p-4","shadow","sm:col-span-6"],[1,"truncate","flex-col","text-lg","font-bold","leading-6","tracking-tight","px-4","flex","items-start","w-full","justify-between"],[1,"text-base","font-medium","opacity-60"],[1,"max-h-[400px]","overflow-y-auto"],[1,"relative","overflow-x-auto","sm:rounded-lg"],[1,"w-full","h-fit","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","dark:text-gray-400"],["scope","col",1,"px-2","sm:px-6","py-3","text-xs","sm:text-sm"],["class","border-b-2",4,"ngFor","ngForOf"],[1,"font-medium","opacity-70"],["action","",1,"py-4","w-full",3,"ngSubmit","formGroup"],["type","text","formControlName","domain","placeholder","Link Yang Ingin Diblokir",1,"py-2","px-2","border-2","rounded","w-full"],["class","text-red-600",4,"ngIf"],["type","submit","mat-button","",1,"bg-green-600","w-full","text-white","mt-4"],[1,"text-red-600"],[4,"ngIf"],[1,"border-b-2"],["scope","row",1,"flex","items-center","px-2","sm:px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"max-sm:pr-4"],[1,"text-base","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-2","sm:px-6","translate-y-[10px]","flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"]],template:function(e,o){if(1&e){const i=t.RV6();t.DNE(0,B,9,2,"ng-template",null,0,t.C5r),t.j41(2,"div",2)(3,"div",3),t.qSk(),t.j41(4,"svg",4)(5,"g",5),t.nrm(6,"circle",6)(7,"circle",7),t.k0s()()(),t.joV(),t.j41(8,"div",8)(9,"div",9)(10,"fuse-card",10,1)(12,"div",11),t.EFF(13,"Blocking Link"),t.k0s(),t.j41(14,"div",12)(15,"p",13),t.EFF(16,"List Link yang diblock "),t.k0s()()(),t.j41(17,"button",14),t.bIt("click",function(){return t.eBV(i),t.Njj(o.openUserForm())}),t.nrm(18,"mat-icon",15),t.EFF(19," Tambah Link "),t.k0s(),t.j41(20,"section",16)(21,"div",17)(22,"div",18),t.EFF(23," Link yang diblokir "),t.j41(24,"span",19),t.EFF(25," Di bawah merupakan link yang diblokir "),t.k0s()(),t.j41(26,"div",20)(27,"div",21)(28,"table",22)(29,"thead",23)(30,"tr")(31,"th",24),t.EFF(32," IP "),t.k0s(),t.j41(33,"th",24),t.EFF(34," Domain "),t.k0s(),t.j41(35,"th",24),t.EFF(36," Keterangan "),t.k0s(),t.j41(37,"th",24),t.EFF(38," Action "),t.k0s()()(),t.j41(39,"tbody"),t.DNE(40,C,14,4,"tr",25),t.k0s()()()()()()()()()}2&e&&(t.R7$(40),t.Y8G("ngForOf",o.listLink))},dependencies:[g.$,k.m_,k.An,p.Hl,p.$z,h.tP,m.MD,m.Sq,m.bT,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD]})}}return r})()}]}}]);