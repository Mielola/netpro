"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5946],{65946:(Zt,rt,c)=>{c.r(rt),c.d(rt,{default:()=>we});var t=c(54438),$=c(11593),Mt=c(76939),j=c(60177),C=c(88834),ct=c(82765),H=c(86600),y=c(53719),R=c(99213),V=c(59042),W=c(59115),q=c(21413),Ft=c(5964),M=c(56977);let Rt=(()=>{class n{constructor(){this._elementRef=(0,t.WQX)(t.aKT),this._router=(0,t.WQX)($.Ix),this._unsubscribeAll=new q.B}ngOnInit(){this._router.events.pipe((0,Ft.p)(e=>e instanceof $.wF),(0,M.Q)(this._unsubscribeAll)).subscribe(()=>{this._elementRef.nativeElement.scrollTop=0})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275dir=t.FsC({type:n,selectors:[["","fuseScrollReset",""]],exportAs:["fuseScrollReset"],standalone:!0})}}return n})();var Et=c(68955);const dt=["gray","red","orange","yellow","green","teal","blue","indigo","purple","pink"],J={gray:{text:"text-gray-500",bg:"bg-gray-500",combined:"text-gray-800 bg-gray-100"},red:{text:"text-red-500",bg:"bg-red-500",combined:"text-red-800 bg-red-100"},orange:{text:"text-orange-500",bg:"bg-orange-500",combined:"text-orange-800 bg-orange-100"},yellow:{text:"text-yellow-500",bg:"bg-yellow-500",combined:"text-yellow-800 bg-yellow-100"},green:{text:"text-green-500",bg:"bg-green-500",combined:"text-green-800 bg-green-100"},teal:{text:"text-teal-500",bg:"bg-teal-500",combined:"text-teal-800 bg-teal-100"},blue:{text:"text-blue-500",bg:"bg-blue-500",combined:"text-blue-800 bg-blue-100"},indigo:{text:"text-indigo-500",bg:"bg-indigo-500",combined:"text-indigo-800 bg-indigo-100"},purple:{text:"text-purple-500",bg:"bg-purple-500",combined:"text-purple-800 bg-purple-100"},pink:{text:"text-pink-500",bg:"bg-pink-500",combined:"text-pink-800 bg-pink-100"}};var I=c(84412),A=c(88141),N=c(25558),Q=c(18810),P=c(7673),X=c(96697),K=c(96354),kt=c(21626);let L=(()=>{class n{constructor(e){this._httpClient=e,this.selectedMailChanged=new I.t(null),this._category=new I.t(null),this._filters=new I.t(null),this._folders=new I.t(null),this._labels=new I.t(null),this._mails=new I.t(null),this._mailsLoading=new I.t(!1),this._mail=new I.t(null),this._pagination=new I.t(null)}get category$(){return this._category.asObservable()}get filters$(){return this._filters.asObservable()}get folders$(){return this._folders.asObservable()}get labels$(){return this._labels.asObservable()}get mails$(){return this._mails.asObservable()}get mailsLoading$(){return this._mailsLoading.asObservable()}get mail$(){return this._mail.asObservable()}get pagination$(){return this._pagination.asObservable()}getFilters(){return this._httpClient.get("api/apps/mailbox/filters").pipe((0,A.M)(e=>{this._filters.next(e)}))}getFolders(){return this._httpClient.get("api/apps/mailbox/folders").pipe((0,A.M)(e=>{this._folders.next(e)}))}getLabels(){return this._httpClient.get("api/apps/mailbox/labels").pipe((0,A.M)(e=>{this._labels.next(e)}))}getMailsByFilter(e,o="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{filter:e,page:o}}).pipe((0,A.M)(i=>{this._category.next({type:"filter",name:e}),this._mails.next(i.mails),this._pagination.next(i.pagination),this._mailsLoading.next(!1)}),(0,N.n)(i=>null===i.mails?(0,Q.$)({message:"Requested page is not available!",pagination:i.pagination}):(0,P.of)(i)))}getMailsByFolder(e,o="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{folder:e,page:o}}).pipe((0,A.M)(i=>{this._category.next({type:"folder",name:e}),this._mails.next(i.mails),this._pagination.next(i.pagination),this._mailsLoading.next(!1)}),(0,N.n)(i=>null===i.mails?(0,Q.$)({message:"Requested page is not available!",pagination:i.pagination}):(0,P.of)(i)))}getMailsByLabel(e,o="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{label:e,page:o}}).pipe((0,A.M)(i=>{this._category.next({type:"label",name:e}),this._mails.next(i.mails),this._pagination.next(i.pagination),this._mailsLoading.next(!1)}),(0,N.n)(i=>null===i.mails?(0,Q.$)({message:"Requested page is not available!",pagination:i.pagination}):(0,P.of)(i)))}getMailById(e){return this._mails.pipe((0,X.s)(1),(0,K.T)(o=>{const i=o.find(s=>s.id===e)||null;return this._mail.next(i),i}),(0,N.n)(o=>o?(0,P.of)(o):(0,Q.$)("Could not found mail with id of "+e+"!")))}updateMail(e,o){return this._httpClient.patch("api/apps/mailbox/mail",{id:e,mail:o}).pipe((0,A.M)(()=>{this.getFolders().subscribe()}))}resetMail(){return(0,P.of)(!0).pipe((0,X.s)(1),(0,A.M)(()=>{this._mail.next(null)}))}addLabel(e){return this.labels$.pipe((0,X.s)(1),(0,N.n)(o=>this._httpClient.post("api/apps/mailbox/label",{label:e}).pipe((0,K.T)(i=>(this._labels.next([...o,i]),i)))))}updateLabel(e,o){return this.labels$.pipe((0,X.s)(1),(0,N.n)(i=>this._httpClient.patch("api/apps/mailbox/label",{id:e,label:o}).pipe((0,K.T)(s=>{const d=i.findIndex(g=>g.id===e);return i[d]=s,this._labels.next(i),s}))))}deleteLabel(e){return this.labels$.pipe((0,X.s)(1),(0,N.n)(o=>this._httpClient.delete("api/apps/mailbox/label",{params:{id:e}}).pipe((0,K.T)(i=>{const s=o.findIndex(d=>d.id===e);return o.splice(s,1),this._labels.next(o),i}))))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(kt.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jt=c(47987);const Tt=["infoDetailsPanelOrigin"],wt=["infoDetailsPanel"],$t=()=>["./../"],It=n=>({"text-red-600 dark:text-red-500":n}),St=n=>({"text-orange-500 dark:text-red-400":n});function Dt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",36),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.toggleLabel(i))}),t.j41(1,"mat-checkbox",37),t.EFF(2),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("color","primary")("checked",o.mail.labels.includes(e.id))("disableRipple",!0),t.R7$(),t.SpI(" ",e.title," ")}}function Lt(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.toggleUnread(!1))}),t.nrm(1,"mat-icon",10),t.j41(2,"span"),t.EFF(3,"Mark as read"),t.k0s()()}2&n&&(t.R7$(),t.Y8G("svgIcon","heroicons_outline:envelope-open"))}function Gt(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.toggleUnread(!0))}),t.nrm(1,"mat-icon",10),t.j41(2,"span"),t.EFF(3,"Mark as unread"),t.k0s()()}2&n&&(t.R7$(),t.Y8G("svgIcon","heroicons_outline:envelope"))}function At(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.moveToFolder("spam"))}),t.nrm(1,"mat-icon",10),t.j41(2,"span"),t.EFF(3,"Spam"),t.k0s()()}2&n&&(t.R7$(),t.Y8G("svgIcon","heroicons_outline:exclamation-triangle"))}function ut(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.moveToFolder("inbox"))}),t.nrm(1,"mat-icon",10),t.j41(2,"span"),t.EFF(3,"Not spam"),t.k0s()()}2&n&&(t.R7$(),t.Y8G("svgIcon","heroicons_outline:exclamation-triangle"))}function nt(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.moveToFolder("trash"))}),t.nrm(1,"mat-icon",10),t.j41(2,"span"),t.EFF(3,"Delete"),t.k0s()()}2&n&&(t.R7$(),t.Y8G("svgIcon","heroicons_outline:trash"))}function Ot(n,a){if(1&n&&(t.j41(0,"div",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(3);t.Y8G("ngClass",o.labelColors[e.color].combined),t.R7$(),t.SpI(" ",e.title," ")}}function Bt(n,a){if(1&n&&(t.j41(0,"div",19),t.Z7z(1,Ot,2,2,"div",39,t.fX1),t.nI1(3,"fuseFindByKey"),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Dyx(t.brH(3,0,e.mail.labels,"id",e.labels))}}function mt(n,a){1&n&&t.EFF(0,"other")}function Nt(n,a){1&n&&t.EFF(0,"others")}function Yt(n,a){if(1&n&&(t.j41(0,"div")(1,"span",40),t.EFF(2,"and"),t.k0s(),t.j41(3,"span",29),t.EFF(4),t.k0s(),t.j41(5,"span",41),t.DNE(6,mt,1,0,"ng-template",42)(7,Nt,1,0,"ng-template",43),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.mail.ccCount+e.mail.bccCount),t.R7$(),t.Y8G("ngPlural",e.mail.ccCount+e.mail.bccCount)}}function Vt(n,a){if(1&n&&(t.j41(0,"div",45)(1,"div",46),t.EFF(2," cc: "),t.k0s(),t.j41(3,"div",47),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.SpI(" ",e.mail.cc.join(",\n")," ")}}function Qt(n,a){if(1&n&&(t.j41(0,"div",45)(1,"div",46),t.EFF(2," bcc: "),t.k0s(),t.j41(3,"div",47),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.SpI(" ",e.mail.bcc.join(",\n")," ")}}function Xt(n,a){if(1&n&&(t.j41(0,"div",44)(1,"div",45)(2,"div",46),t.EFF(3," from: "),t.k0s(),t.j41(4,"div",47),t.EFF(5),t.k0s()(),t.j41(6,"div",45)(7,"div",46),t.EFF(8," to: "),t.k0s(),t.j41(9,"div",47),t.EFF(10),t.k0s()(),t.DNE(11,Vt,5,1,"div",45)(12,Qt,5,1,"div",45),t.j41(13,"div",45)(14,"div",46),t.EFF(15," date: "),t.k0s(),t.j41(16,"div",47),t.EFF(17),t.nI1(18,"date"),t.k0s()(),t.j41(19,"div",45)(20,"div",46),t.EFF(21," subject: "),t.k0s(),t.j41(22,"div",47),t.EFF(23),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(5),t.SpI(" ",e.mail.from.contact," "),t.R7$(5),t.SpI(" ",e.mail.to," "),t.R7$(),t.vxM(e.mail.cc?11:-1),t.R7$(),t.vxM(e.mail.bcc?12:-1),t.R7$(5),t.SpI(" ",t.i5U(18,6,e.mail.date,"EEEE, MMMM d, y - hh:mm a")," "),t.R7$(6),t.SpI(" ",e.mail.subject," ")}}function ht(n,a){if(1&n&&t.nrm(0,"img",52),2&n){const e=t.XpG().$implicit;t.Y8G("src","images/apps/mailbox/"+e.preview,t.B4B)}}function ft(n,a){if(1&n&&(t.j41(0,"div",53)(1,"div",57),t.EFF(2),t.k0s()()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.type.split("/")[1].trim().toUpperCase()," ")}}function pt(n,a){if(1&n&&(t.j41(0,"div",51),t.DNE(1,ht,1,1,"img",52)(2,ft,3,1,"div",53),t.j41(3,"div",54)(4,"div",55),t.EFF(5),t.k0s(),t.j41(6,"div",56),t.EFF(7),t.nI1(8,"number"),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(),t.vxM(e.type.startsWith("image/")?1:-1),t.R7$(),t.vxM(e.type.startsWith("application/")?2:-1),t.R7$(2),t.Y8G("title",e.name),t.R7$(),t.SpI(" ",e.name," "),t.R7$(),t.Y8G("title",e.size),t.R7$(),t.SpI(" ",t.i5U(8,6,e.size/1e3,"1.0-2")," KB ")}}function zt(n,a){if(1&n&&(t.j41(0,"div",33)(1,"div",48),t.nrm(2,"mat-icon",31),t.j41(3,"div",49),t.EFF(4),t.k0s()(),t.j41(5,"div",50),t.Z7z(6,pt,9,9,"div",51,t.fX1),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("svgIcon","heroicons_solid:paper-clip"),t.R7$(2),t.SpI(" ",e.mail.attachments.length," Attachments "),t.R7$(2),t.Dyx(e.mail.attachments)}}function qt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",35)(1,"button",58),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.reply())}),t.nrm(2,"mat-icon",31),t.j41(3,"span",59),t.EFF(4,"Reply"),t.k0s()(),t.j41(5,"button",58),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.replyAll())}),t.nrm(6,"mat-icon",31),t.j41(7,"span",59),t.EFF(8,"Reply All"),t.k0s()(),t.j41(9,"button",58),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.forward())}),t.nrm(10,"mat-icon",60),t.j41(11,"span",59),t.EFF(12,"Forward"),t.k0s()()()}2&n&&(t.R7$(),t.Y8G("color","primary"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:arrow-uturn-left"),t.R7$(3),t.Y8G("color","primary"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:arrow-uturn-left"),t.R7$(3),t.Y8G("color","primary"),t.R7$(),t.Y8G("color","primary")("svgIcon","heroicons_solid:chevron-double-right"))}function gt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",33,4)(2,"mat-form-field",61),t.nrm(3,"textarea",62),t.k0s(),t.j41(4,"div",63)(5,"div",64)(6,"button",65),t.nrm(7,"mat-icon",31),t.k0s(),t.j41(8,"button",65),t.nrm(9,"mat-icon",31),t.k0s(),t.j41(10,"button",65),t.nrm(11,"mat-icon",31),t.k0s(),t.j41(12,"button",65),t.nrm(13,"mat-icon",31),t.k0s()(),t.j41(14,"div",66)(15,"button",67),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.discard())}),t.EFF(16," Discard "),t.k0s(),t.j41(17,"button",68),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.send())}),t.EFF(18," Send "),t.k0s()()()()}2&n&&(t.R7$(2),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("placeholder","Type your reply here")("rows",4),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:paper-clip"),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:link"),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:face-smile"),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:photo"),t.R7$(4),t.Y8G("color","primary"))}function bt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"a",9),t.nrm(3,"mat-icon",10),t.k0s(),t.j41(4,"button",11),t.nrm(5,"mat-icon",10),t.k0s(),t.j41(6,"mat-menu",null,0),t.Z7z(8,Dt,3,4,"div",12,t.BUC().trackByFn,!0),t.k0s(),t.j41(10,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleImportant())}),t.nrm(11,"mat-icon",14),t.k0s(),t.j41(12,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleStar())}),t.nrm(13,"mat-icon",14),t.k0s(),t.j41(14,"button",15),t.nrm(15,"mat-icon",10),t.k0s(),t.j41(16,"mat-menu",null,1),t.DNE(18,Lt,4,1,"button",16)(19,Gt,4,1,"button",16)(20,At,4,1,"button",16)(21,ut,4,1,"button",16)(22,nt,4,1,"button",16),t.k0s()(),t.j41(23,"div",17)(24,"div",18),t.EFF(25),t.k0s(),t.DNE(26,Bt,4,4,"div",19),t.k0s()(),t.j41(27,"div",20)(28,"div",21)(29,"div",22)(30,"div",23)(31,"div",24),t.nrm(32,"img",25),t.k0s(),t.j41(33,"div",26)(34,"div",27),t.EFF(35),t.k0s(),t.j41(36,"div",28)(37,"div"),t.EFF(38,"to"),t.k0s(),t.j41(39,"div",29),t.EFF(40,"me"),t.k0s(),t.DNE(41,Yt,8,2,"div"),t.j41(42,"button",30,2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openInfoDetailsPanel())}),t.nrm(44,"mat-icon",31),t.k0s(),t.DNE(45,Xt,24,9,"ng-template",null,3,t.C5r),t.k0s()()(),t.nrm(47,"div",32),t.DNE(48,zt,8,2,"div",33),t.k0s(),t.j41(49,"div",34),t.DNE(50,qt,13,7,"div",35)(51,gt,19,8,"div",33),t.k0s()()()}if(2&n){const e=t.sdS(7),o=t.sdS(17),i=t.XpG();t.R7$(2),t.Y8G("routerLink",t.lJ4(25,$t)),t.R7$(),t.Y8G("svgIcon","heroicons_outline:arrow-long-left"),t.R7$(),t.Y8G("matMenuTriggerFor",e),t.R7$(),t.Y8G("svgIcon","heroicons_outline:tag"),t.R7$(3),t.Dyx(i.labels),t.R7$(3),t.Y8G("ngClass",t.eq3(26,It,i.mail.important))("svgIcon","heroicons_outline:exclamation-circle"),t.R7$(2),t.Y8G("ngClass",t.eq3(28,St,i.mail.starred))("svgIcon","heroicons_outline:star"),t.R7$(),t.Y8G("matMenuTriggerFor",o),t.R7$(),t.Y8G("svgIcon","heroicons_outline:ellipsis-vertical"),t.R7$(3),t.vxM(i.mail.unread?18:-1),t.R7$(),t.vxM(i.mail.unread?-1:19),t.R7$(),t.vxM("spam"!==i.getCurrentFolder()&&"drafts"!==i.getCurrentFolder()?20:-1),t.R7$(),t.vxM("spam"===i.getCurrentFolder()?21:-1),t.R7$(),t.vxM("trash"!==i.getCurrentFolder()?22:-1),t.R7$(3),t.SpI(" ",i.mail.subject," "),t.R7$(),t.vxM(i.mail.labels&&i.mail.labels.length>0?26:-1),t.R7$(6),t.Y8G("src",i.mail.from.avatar,t.B4B),t.R7$(3),t.SpI(" ",i.mail.from.contact.split("<")[0].trim()," "),t.R7$(6),t.vxM(i.mail.ccCount+i.mail.bccCount>0?41:-1),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:chevron-down"),t.R7$(3),t.Y8G("innerHTML",i.mail.content,t.npT),t.R7$(),t.vxM(i.mail.attachments&&i.mail.attachments.length>0?48:-1),t.R7$(2),t.vxM(i.replyFormActive?-1:50),t.R7$(),t.vxM(i.replyFormActive?51:-1)}}function Z(n,a){1&n&&(t.j41(0,"div",6),t.nrm(1,"mat-icon",69),t.j41(2,"div",70),t.EFF(3," Select a mail to read "),t.k0s()()),2&n&&(t.R7$(),t.Y8G("svgIcon","heroicons_outline:envelope"))}let Pt=(()=>{class n{constructor(e,o,i,s,d,g){this._activatedRoute=e,this._elementRef=o,this._mailboxService=i,this._overlay=s,this._router=d,this._viewContainerRef=g,this.replyFormActive=!1,this._unsubscribeAll=new q.B}ngOnInit(){this.labelColors=J,this._mailboxService.folders$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.folders=e}),this._mailboxService.labels$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.labels=e}),this._mailboxService.mail$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.mail=e}),this._mailboxService.selectedMailChanged.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(()=>{this.replyFormActive=!1})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getCurrentFolder(){return this._activatedRoute.snapshot.paramMap.get("folder")}moveToFolder(e){const o=this.folders.find(i=>i.slug===e);this.mail.folder!==o.id&&(this.mail.folder=o.id,this._mailboxService.updateMail(this.mail.id,{folder:this.mail.folder}).subscribe(),this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent}))}toggleLabel(e){let o=!1;this.mail.labels.includes(e.id)?(o=!0,this.mail.labels.splice(this.mail.labels.indexOf(e.id),1)):this.mail.labels.push(e.id),this._mailboxService.updateMail(this.mail.id,{labels:this.mail.labels}).subscribe(),o&&this._activatedRoute.snapshot.paramMap.get("label")&&this._activatedRoute.snapshot.paramMap.get("label")===e.slug&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleImportant(){this.mail.important=!this.mail.important,this._mailboxService.updateMail(this.mail.id,{important:this.mail.important}).subscribe(),this.mail.important||this._activatedRoute.snapshot.paramMap.get("filter")&&"important"===this._activatedRoute.snapshot.paramMap.get("filter")&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleStar(){this.mail.starred=!this.mail.starred,this._mailboxService.updateMail(this.mail.id,{starred:this.mail.starred}).subscribe(),this.mail.starred||this._activatedRoute.snapshot.paramMap.get("filter")&&"starred"===this._activatedRoute.snapshot.paramMap.get("filter")&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleUnread(e){this.mail.unread=e,this._mailboxService.updateMail(this.mail.id,{unread:this.mail.unread}).subscribe()}reply(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}replyAll(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}forward(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}discard(){this.replyFormActive=!1}send(){this.replyFormActive=!1}openInfoDetailsPanel(){this._overlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._infoDetailsPanelOrigin._elementRef.nativeElement).withFlexibleDimensions(!0).withViewportMargin(16).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])});const e=new Mt.VA(this._infoDetailsPanel,this._viewContainerRef);this._overlayRef.attach(e),this._overlayRef.backdropClick().subscribe(()=>{this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),e&&e.isAttached&&e.detach()})}trackByFn(e,o){return o.id||e}static{this.\u0275fac=function(o){return new(o||n)(t.rXU($.nX),t.rXU(t.aKT),t.rXU(L),t.rXU(jt.hJ),t.rXU($.Ix),t.rXU(t.c1b))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["mailbox-details"]],viewQuery:function(o,i){if(1&o&&(t.GBs(Tt,5),t.GBs(wt,5)),2&o){let s;t.mGM(s=t.lsd())&&(i._infoDetailsPanelOrigin=s.first),t.mGM(s=t.lsd())&&(i._infoDetailsPanel=s.first)}},standalone:!0,features:[t.aNF],decls:3,vars:1,consts:[["toggleLabelMenu","matMenu"],["mailMenu","matMenu"],["infoDetailsPanelOrigin",""],["infoDetailsPanel",""],["replyForm",""],[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"relative","z-10","flex","w-full","flex-0","flex-col","border-b"],[1,"flex","min-h-16","items-center","border-b","bg-gray-50","px-4","dark:bg-transparent","md:px-6"],["mat-icon-button","",1,"md:-ml-2","lg:hidden",3,"routerLink"],[3,"svgIcon"],["mat-icon-button","",1,"ml-auto",3,"matMenuTriggerFor"],["mat-menu-item","","matRipple",""],["mat-icon-button","",1,"ml-2",3,"click"],[3,"ngClass","svgIcon"],["mat-icon-button","",1,"ml-2",3,"matMenuTriggerFor"],["mat-menu-item",""],[1,"flex","flex-wrap","items-center","px-6","py-5"],[1,"my-1","mr-4","flex","flex-auto","text-2xl"],[1,"-mx-1","flex","flex-wrap","items-center","justify-start"],["fuseScrollReset","",1,"flex","flex-auto","shrink-0","flex-col","bg-gray-100","p-3","dark:bg-transparent","lg:shrink","lg:overflow-y-auto"],[1,"bg-card","flex","w-full","flex-0","flex-col","overflow-hidden","rounded-2xl","shadow","dark:bg-black","dark:bg-opacity-10"],[1,"flex","flex-col","px-6","py-8"],[1,"flex","w-full","items-center"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["alt","User avatar",1,"h-full","w-full",3,"src"],[1,"ml-4","min-w-0"],[1,"truncate","font-semibold"],[1,"mt-0.5","flex","items-center","leading-5"],[1,"ml-1","font-semibold"],["mat-icon-button","",1,"ml-1","h-5","min-h-5","w-5",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-8","flex","whitespace-pre-line","leading-relaxed",3,"innerHTML"],[1,"flex","w-full","flex-col"],[1,"flex","w-full","border-t","bg-gray-50","p-6","dark:bg-transparent"],[1,"-m-2","flex","w-full","flex-wrap"],["mat-menu-item","","matRipple","",3,"click"],[1,"pointer-events-none",3,"color","checked","disableRipple"],["mat-menu-item","",3,"click"],[1,"m-1","whitespace-nowrap","rounded-full","px-2.5","py-0.5","text-sm","font-medium",3,"ngClass"],[1,"ml-1"],[1,"ml-1","font-semibold",3,"ngPlural"],["ngPluralCase","=1"],["ngPluralCase","other"],[1,"bg-card","flex","w-full","max-w-160","flex-col","space-y-1.5","overflow-auto","rounded","border","px-6","py-4","text-md","shadow-md"],[1,"flex"],[1,"min-w-14","text-right","font-medium"],[1,"whitespace-pre-wrap","pl-2"],[1,"mt-12","flex","items-center"],[1,"ml-2","font-semibold"],[1,"-m-3","mt-3","flex","flex-wrap"],[1,"m-3","flex","items-center"],[1,"h-10","w-10","overflow-hidden","rounded-md",3,"src"],[1,"flex","h-10","w-10","items-center","justify-center","overflow-hidden","rounded-md","bg-primary-100"],[1,"ml-3"],[1,"truncate","text-md","font-medium",3,"title"],[1,"text-secondary","truncate","text-sm","font-medium",3,"title"],[1,"text-primary-500-800","flex","items-center","justify-center","text-sm","font-semibold"],["mat-stroked-button","",1,"m-2",3,"click","color"],[1,"ml-2"],[1,"icon-size-5",3,"color","svgIcon"],[3,"subscriptSizing"],["matInput","",1,"textarea",3,"placeholder","rows"],[1,"mt-4","flex","flex-col","justify-between","sm:mt-6","sm:flex-row","sm:items-center"],[1,"-ml-2"],["mat-icon-button",""],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"order-last","ml-3","sm:order-first","sm:ml-0",3,"click"],["mat-flat-button","",1,"sm:ml-3",3,"click","color"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(o,i){1&o&&(t.j41(0,"div",5),t.DNE(1,bt,52,30)(2,Z,4,1,"div",6),t.k0s()),2&o&&(t.R7$(),t.vxM(i.mail?1:2))},dependencies:[C.Hl,C.$z,C.pQ,C.iY,$.Wk,R.m_,R.An,W.Cn,W.kk,W.fb,W.Cp,H.pZ,H.r6,ct.g7,ct.So,j.YU,Rt,j.IJ,j.WO,y.RG,y.rl,V.fS,V.fg,Et.H,j.QX,j.vh],encapsulation:2})}}return n})(),vt=(()=>{class n{constructor(){}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["mailbox-empty-details"]],standalone:!0,features:[t.aNF],decls:5,vars:1,consts:[[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"mat-icon",2),t.j41(3,"div",3),t.EFF(4," Select a mail to read "),t.k0s()()()),2&o&&(t.R7$(2),t.Y8G("svgIcon","heroicons_outline:envelope"))},dependencies:[R.m_,R.An],encapsulation:2})}}return n})();var xt=c(67575),tt=c(90882),ot=c(34887),m=c(89417),_t=c(10467);const st={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},Ct=new t.nKC("config",{providedIn:"root",factory:()=>({modules:st})});var h=c(345),f=c(89079),v=c(71985),u=c(59030),b=c(74402),F=c(54843),x=c(18359),_=c(33726),S=c(44668),E=c(31397),p=c(70152);const G=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],k=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function T(n,a){1&n&&t.nrm(0,"div",0)}function O(n,a){1&n&&t.nrm(0,"div",0)}const D=(n,a)=>n||a||"html";let yt=(()=>{class n{constructor(e,o){var i=this;this.config=o,this.quill$=(0,u.v)((0,_t.A)(function*(){if(!i.Quill){const s=i.document.addEventListener;i.document.addEventListener=i.document.__zone_symbol__addEventListener||i.document.addEventListener;const d=yield c.e(1593).then(c.bind(c,71593));i.document.addEventListener=s,i.Quill=d.default?.default??d.default??d}return i.config.customOptions?.forEach(s=>{const d=i.Quill.import(s.import);d.whitelist=s.whitelist,i.Quill.register(d,!0,i.config.suppressGlobalRegisterWarning)}),yield i.registerCustomModules(i.Quill,i.config.customModules,i.config.suppressGlobalRegisterWarning)})).pipe((0,S.t)({bufferSize:1,refCount:!0})),this.document=e.get(j.qQ),this.config||(this.config={modules:st})}getQuill(){return this.quill$}registerCustomModules(e,o,i){return(0,_t.A)(function*(){if(Array.isArray(o))for(let{implementation:s,path:d}of o)(0,b.A)(s)&&(s=yield(0,F._)(s)),e.register(d,s,i);return e})()}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(t.zZn),t.KVO(Ct,8))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),et=(()=>{class n{constructor(){this.format=(0,t.hFB)(void 0),this.theme=(0,t.hFB)(void 0),this.modules=(0,t.hFB)(void 0),this.debug=(0,t.hFB)(!1),this.readOnly=(0,t.hFB)(!1),this.placeholder=(0,t.hFB)(void 0),this.maxLength=(0,t.hFB)(void 0),this.minLength=(0,t.hFB)(void 0),this.required=(0,t.hFB)(!1),this.formats=(0,t.hFB)(void 0),this.customToolbarPosition=(0,t.hFB)("top"),this.sanitize=(0,t.hFB)(!1),this.beforeRender=(0,t.hFB)(void 0),this.styles=(0,t.hFB)(null),this.registry=(0,t.hFB)(void 0),this.bounds=(0,t.hFB)(void 0),this.customOptions=(0,t.hFB)([]),this.customModules=(0,t.hFB)([]),this.trackChanges=(0,t.hFB)(void 0),this.classes=(0,t.hFB)(void 0),this.trimOnValidation=(0,t.hFB)(!1),this.linkPlaceholder=(0,t.hFB)(void 0),this.compareValues=(0,t.hFB)(!1),this.filterNull=(0,t.hFB)(!1),this.debounceTime=(0,t.hFB)(void 0),this.defaultEmptyValue=(0,t.hFB)(null),this.onEditorCreated=new t.bkB,this.onEditorChanged=new t.bkB,this.onContentChanged=new t.bkB,this.onSelectionChanged=new t.bkB,this.onFocus=new t.bkB,this.onBlur=new t.bkB,this.onNativeFocus=new t.bkB,this.onNativeBlur=new t.bkB,this.disabled=!1,this.toolbarPosition=(0,t.vPA)("top"),this.subscription=null,this.quillSubscription=null,this.elementRef=(0,t.WQX)(t.aKT),this.document=(0,t.WQX)(j.qQ),this.cd=(0,t.WQX)(t.gRc),this.domSanitizer=(0,t.WQX)(h.up),this.platformId=(0,t.WQX)(t.Agw),this.renderer=(0,t.WQX)(t.sFG),this.zone=(0,t.WQX)(t.SKi),this.service=(0,t.WQX)(yt),this.destroyRef=(0,t.WQX)(t.abz),this.valueGetter=(0,t.hFB)(e=>{let o=e.getSemanticHTML();this.isEmptyValue(o)&&(o=this.defaultEmptyValue());let i=o;const s=D(this.format(),this.service.config.format);if("text"===s)i=e.getText();else if("object"===s)i=e.getContents();else if("json"===s)try{i=JSON.stringify(e.getContents())}catch{i=e.getText()}return i}),this.valueSetter=(0,t.hFB)((e,o)=>{const i=D(this.format(),this.service.config.format);if("html"===i)return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(o=this.domSanitizer.sanitize(t.WPN.HTML,o)),e.clipboard.convert({html:o});if("json"===i)try{return JSON.parse(o)}catch{return[{insert:o}]}return o}),this.selectionChangeHandler=(e,o,i)=>{const s=this.trackChanges()||this.service.config.trackChanges,d=!e&&!!this.onModelTouched&&("user"===i||s&&"all"===s);!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!d||this.zone.run(()=>{null===e?this.onBlur.emit({editor:this.quillEditor,source:i}):null===o&&this.onFocus.emit({editor:this.quillEditor,source:i}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:o,range:e,source:i}),d&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,o,i)=>{const s=this.quillEditor.getText(),d=this.quillEditor.getContents();let g=this.quillEditor.getSemanticHTML();this.isEmptyValue(g)&&(g=this.defaultEmptyValue());const w=this.trackChanges()||this.service.config.trackChanges,U=("user"===i||w&&"all"===w)&&!!this.onModelChange;!this.onContentChanged.observed&&!U||this.zone.run(()=>{if(U){const lt=this.valueGetter();this.onModelChange(lt(this.quillEditor))}this.onContentChanged.emit({content:d,delta:e,editor:this.quillEditor,html:g,oldDelta:o,source:i,text:s}),this.cd.markForCheck()})},this.editorChangeHandler=(e,o,i,s)=>{if(this.onEditorChanged.observed)if("text-change"===e){const d=this.quillEditor.getText(),g=this.quillEditor.getContents();let w=this.quillEditor.getSemanticHTML();this.isEmptyValue(w)&&(w=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:g,delta:o,editor:this.quillEditor,event:e,html:w,oldDelta:i,source:s,text:d}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:i,range:o,source:s}),this.cd.markForCheck()})}}static normalizeClassNames(e){return e.trim().split(" ").reduce((i,s)=>{const d=s.trim();return d&&i.push(d),i},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){(0,j.Vy)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,E.Z)(e=>{const o=[this.service.registerCustomModules(e,this.customModules())],i=this.beforeRender()??this.service.config.beforeRender;return i&&o.push(i()),Promise.all(o).then(()=>e)})).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const o=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),i=Object.assign({},this.modules()||this.service.config.modules);o?i.toolbar=o:void 0===i.toolbar&&(i.toolbar=st.toolbar);let s=void 0!==this.placeholder()?this.placeholder():this.service.config.placeholder;void 0===s&&(s="Insert text here ...");const d=this.styles();d&&Object.keys(d).forEach(B=>{this.renderer.setStyle(this.editorElem,B,d[B])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(B=>{const z=e.import(B.import);z.whitelist=B.whitelist,e.register(z,!0)});let g=this.bounds()&&"self"===this.bounds()?this.editorElem:this.bounds();g||(g=this.service.config.bounds?this.service.config.bounds:this.document.body);let w=this.debug();!w&&!1!==w&&this.service.config.debug&&(w=this.service.config.debug);let U=this.readOnly();!U&&!1!==this.readOnly()&&(U=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let lt=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(lt=this.service.config.defaultEmptyValue);let at=this.formats();if(!at&&void 0===at&&(at=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:g,debug:w,formats:at,modules:i,placeholder:s,readOnly:U,defaultEmptyValue:lt,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed&&(this.quillEditor.scroll.domNode.addEventListener("blur",()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"})),this.quillEditor.getModule("toolbar").container?.addEventListener("mousedown",z=>z.preventDefault())),this.onNativeFocus.observed&&this.quillEditor.scroll.domNode.addEventListener("focus",()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){const z=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");z?.dataset&&(z.dataset.link=this.linkPlaceholder())}}),this.content){if("text"===D(this.format(),this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const $e=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents($e,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&new v.c(n=>{const a=requestAnimationFrame(()=>{n.next(),n.complete()});return()=>cancelAnimationFrame(a)}).pipe((0,f.pQ)(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=e.defaultEmptyValue.currentValue),e.styles){const o=e.styles.currentValue,i=e.styles.previousValue;i&&Object.keys(i).forEach(s=>{this.renderer.removeStyle(this.editorElem,s)}),o&&Object.keys(o).forEach(s=>{this.renderer.setStyle(this.editorElem,s,this.styles()[s])})}if(e.classes){const o=e.classes.currentValue,i=e.classes.previousValue;i&&this.removeClasses(i),o&&this.addClasses(o)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){n.normalizeClassNames(e).forEach(o=>{this.renderer.addClass(this.editorElem,o)})}removeClasses(e){n.normalizeClassNames(e).forEach(o=>{this.renderer.removeClass(this.editorElem,o)})}writeValue(e){if(this.filterNull()&&null===e||(this.content=e,!this.quillEditor))return;const o=D(this.format(),this.service.config.format),s=this.valueSetter()(this.quillEditor,e);if(this.compareValues()){const d=this.quillEditor.getContents();if(JSON.stringify(d)===JSON.stringify(s))return}e?"text"===o?this.quillEditor.setText(e):this.quillEditor.setContents(s):this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;const e={};let o=!0;const i=this.quillEditor.getText(),s=this.trimOnValidation()?i.trim().length:1===i.length&&0===i.trim().length?0:i.length-1,d=this.quillEditor.getContents().ops,g=!!d&&1===d.length&&["\n",""].includes(d[0].insert?.toString());return this.minLength()&&s&&s<this.minLength()&&(e.minLengthError={given:s,minLength:this.minLength()},o=!1),this.maxLength()&&s>this.maxLength()&&(e.maxLengthError={given:s,maxLength:this.maxLength()},o=!1),this.required()&&!s&&g&&(e.requiredError={empty:!0},o=!1),o?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new x.yU,this.subscription.add((0,_.R)(this.quillEditor,"selection-change").subscribe(([i,s,d])=>{this.selectionChangeHandler(i,s,d)}));let e=(0,_.R)(this.quillEditor,"text-change"),o=(0,_.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime()&&(e=e.pipe((0,p.B)(this.debounceTime())),o=o.pipe((0,p.B)(this.debounceTime()))),this.subscription.add(e.subscribe(([i,s,d])=>{this.textChangeHandler(i,s,d)})),this.subscription.add(o.subscribe(([i,s,d,g])=>{this.editorChangeHandler(i,s,d,g)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}isEmptyValue(e){return"<p></p>"===e||"<div></div>"===e||"<p><br></p>"===e||"<div><br></div>"===e}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275dir=t.FsC({type:n,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[t.OA$]})}}return n})(),it=(()=>{class n extends et{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})()}static{this.\u0275cmp=t.VBU({type:n,selectors:[["quill-editor"]],standalone:!0,features:[t.Jv_([{multi:!0,provide:m.kq,useExisting:(0,t.Rfq)(()=>n)},{multi:!0,provide:m.cz,useExisting:(0,t.Rfq)(()=>n)}]),t.Vt3,t.aNF],ngContentSelectors:k,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(o,i){1&o&&(t.NAR(G),t.DNE(0,T,1,0,"div",0),t.SdG(1),t.SdG(2,1),t.SdG(3,2),t.DNE(4,O,1,0,"div",0)),2&o&&(t.vxM("top"!==i.toolbarPosition()?0:-1),t.R7$(4),t.vxM("top"===i.toolbarPosition()?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return n})();var Jt=c(75351);function te(n,a){if(1&n){const e=t.RV6();t.j41(0,"span",19),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.showCopyField("cc"))}),t.EFF(1," Cc "),t.k0s()}}function ee(n,a){if(1&n){const e=t.RV6();t.j41(0,"span",20),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.showCopyField("bcc"))}),t.EFF(1," Bcc "),t.k0s()}}function ie(n,a){1&n&&(t.j41(0,"mat-form-field")(1,"mat-label"),t.EFF(2,"Cc"),t.k0s(),t.nrm(3,"input",6),t.k0s()),2&n&&(t.R7$(3),t.Y8G("formControlName","cc"))}function ne(n,a){1&n&&(t.j41(0,"mat-form-field")(1,"mat-label"),t.EFF(2,"Bcc"),t.k0s(),t.nrm(3,"input",6),t.k0s()),2&n&&(t.R7$(3),t.Y8G("formControlName","bcc"))}let oe=(()=>{class n{constructor(e,o){this.matDialogRef=e,this._formBuilder=o,this.copyFields={cc:!1,bcc:!1},this.quillModules={toolbar:[["bold","italic","underline"],[{align:[]},{list:"ordered"},{list:"bullet"}],["clean"]]}}ngOnInit(){this.composeForm=this._formBuilder.group({to:["",[m.k0.required,m.k0.email]],cc:["",[m.k0.email]],bcc:["",[m.k0.email]],subject:[""],body:["",[m.k0.required]]})}showCopyField(e){"cc"!==e&&"bcc"!==e||(this.copyFields[e]=!0)}saveAndClose(){this.saveAsDraft(),this.matDialogRef.close()}discard(){}saveAsDraft(){}send(){}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Jt.CP),t.rXU(m.ze))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["mailbox-compose"]],standalone:!0,features:[t.aNF],decls:39,vars:17,consts:[[1,"-m-6","flex","max-h-screen","max-w-240","flex-col","md:min-w-160"],[1,"flex","h-16","flex-0","items-center","justify-between","bg-primary","pl-6","pr-3","text-on-primary","sm:pl-8","sm:pr-5"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"click","tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-auto","flex-col","overflow-y-auto","p-6","sm:p-8",3,"formGroup"],["matInput","",3,"formControlName"],["matSuffix","",1,"copy-fields-toggles"],[1,"cursor-pointer","select-none","text-sm","font-medium","hover:underline"],[1,"ml-2","cursor-pointer","select-none","text-sm","font-medium","hover:underline"],[1,"mt-2",3,"formControlName","bounds","modules"],[1,"mt-4","flex","flex-col","justify-between","sm:mt-6","sm:flex-row","sm:items-center"],[1,"-ml-2"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-stroked-button","",1,"ml-auto","sm:ml-0",3,"click"],["mat-stroked-button","",1,"sm:mx-3",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"click","color"],[1,"cursor-pointer","select-none","text-sm","font-medium","hover:underline",3,"click"],[1,"ml-2","cursor-pointer","select-none","text-sm","font-medium","hover:underline",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"New Message"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return i.saveAndClose()}),t.nrm(5,"mat-icon",4),t.k0s()(),t.j41(6,"form",5)(7,"mat-form-field")(8,"mat-label"),t.EFF(9,"To"),t.k0s(),t.nrm(10,"input",6),t.j41(11,"div",7),t.DNE(12,te,2,0,"span",8)(13,ee,2,0,"span",9),t.k0s()(),t.DNE(14,ie,4,1,"mat-form-field")(15,ne,4,1,"mat-form-field"),t.j41(16,"mat-form-field")(17,"mat-label"),t.EFF(18,"Subject"),t.k0s(),t.nrm(19,"input",6),t.k0s(),t.nrm(20,"quill-editor",10),t.j41(21,"div",11)(22,"div",12)(23,"button",13),t.nrm(24,"mat-icon",14),t.k0s(),t.j41(25,"button",13),t.nrm(26,"mat-icon",14),t.k0s(),t.j41(27,"button",13),t.nrm(28,"mat-icon",14),t.k0s(),t.j41(29,"button",13),t.nrm(30,"mat-icon",14),t.k0s()(),t.j41(31,"div",15)(32,"button",16),t.bIt("click",function(){return i.discard()}),t.EFF(33," Discard "),t.k0s(),t.j41(34,"button",17),t.bIt("click",function(){return i.saveAsDraft()}),t.j41(35,"span"),t.EFF(36,"Save as draft"),t.k0s()(),t.j41(37,"button",18),t.bIt("click",function(){return i.send()}),t.EFF(38," Send "),t.k0s()()()()()),2&o&&(t.R7$(4),t.Y8G("tabIndex",-1),t.R7$(),t.Y8G("svgIcon","heroicons_outline:x-mark"),t.R7$(),t.Y8G("formGroup",i.composeForm),t.R7$(4),t.Y8G("formControlName","to"),t.R7$(2),t.vxM(i.copyFields.cc?-1:12),t.R7$(),t.vxM(i.copyFields.bcc?-1:13),t.R7$(),t.vxM(i.copyFields.cc?14:-1),t.R7$(),t.vxM(i.copyFields.bcc?15:-1),t.R7$(4),t.Y8G("formControlName","subject"),t.R7$(),t.Y8G("formControlName","body")("bounds","self")("modules",i.quillModules),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:paper-clip"),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:link"),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:face-smile"),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:photo"),t.R7$(7),t.Y8G("color","primary"))},dependencies:[C.Hl,C.$z,C.iY,R.m_,R.An,m.YN,m.qT,m.me,m.BC,m.cb,m.X1,m.j4,m.JD,y.RG,y.rl,y.nJ,y.yw,V.fS,V.fg,it],encapsulation:2})}}return n})(),se=(()=>{class n{constructor(e,o,i){this._mailboxService=e,this._matDialog=o,this._fuseNavigationService=i,this.menuData=[],this._filtersMenuData=[],this._foldersMenuData=[],this._labelsMenuData=[],this._otherMenuData=[],this._unsubscribeAll=new q.B}ngOnInit(){this._mailboxService.filters$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.filters=e,this._generateFiltersMenuLinks()}),this._mailboxService.folders$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.folders=e,this._generateFoldersMenuLinks(),this._updateNavigationBadge(e)}),this._mailboxService.labels$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.labels=e,this._generateLabelsMenuLinks()}),this._generateOtherMenuLinks()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}openComposeDialog(){this._matDialog.open(oe).afterClosed().subscribe(o=>{console.log("Compose dialog was closed!")})}_generateFoldersMenuLinks(){this._foldersMenuData=[],this.folders.forEach(e=>{const o={id:e.id,title:e.title,type:"basic",icon:e.icon,link:"/apps/mailbox/"+e.slug};e.count&&e.count>0&&(o.badge={title:e.count+""}),this._foldersMenuData.push(o)}),this._updateMenuData()}_generateFiltersMenuLinks(){this._filtersMenuData=[],this.filters.forEach(e=>{this._filtersMenuData.push({id:e.id,title:e.title,type:"basic",icon:e.icon,link:"/apps/mailbox/filter/"+e.slug})}),this._updateMenuData()}_generateLabelsMenuLinks(){this._labelsMenuData=[],this.labels.forEach(e=>{this._labelsMenuData.push({id:e.id,title:e.title,type:"basic",icon:"heroicons_outline:tag",classes:{icon:J[e.color].text},link:"/apps/mailbox/label/"+e.slug})}),this._updateMenuData()}_generateOtherMenuLinks(){this._otherMenuData.push({title:"Settings",type:"basic",icon:"heroicons_outline:cog-8-tooth",link:"/apps/mailbox/settings"}),this._updateMenuData()}_updateMenuData(){this.menuData=[{title:"MAILBOXES",type:"group",children:[...this._foldersMenuData]},{title:"FILTERS",type:"group",children:[...this._filtersMenuData]},{title:"LABELS",type:"group",children:[...this._labelsMenuData]},{type:"spacer"},...this._otherMenuData]}_updateNavigationBadge(e){const o=this.folders.find(s=>"inbox"===s.slug),i=this._fuseNavigationService.getComponent("mainNavigation");i&&(this._fuseNavigationService.getItem("apps.mailbox",i.navigation).badge.title=o.count+"",i.refresh())}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(L),t.rXU(Jt.bZ),t.rXU(ot.L5))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["mailbox-sidebar"]],standalone:!0,features:[t.aNF],decls:8,vars:6,consts:[[1,"flex","w-full","flex-auto","flex-col"],[1,"mx-6","mb-8","mt-10","text-4xl","font-extrabold","leading-none","tracking-tight"],["mat-flat-button","",1,"mx-6",3,"click","color"],[3,"svgIcon"],[1,"ml-2"],[3,"navigation","inner","mode","opened"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2," Mailbox "),t.k0s(),t.j41(3,"button",2),t.bIt("click",function(){return i.openComposeDialog()}),t.nrm(4,"mat-icon",3),t.j41(5,"span",4),t.EFF(6,"Compose"),t.k0s()(),t.nrm(7,"fuse-vertical-navigation",5),t.k0s()),2&o&&(t.R7$(3),t.Y8G("color","primary"),t.R7$(),t.Y8G("svgIcon","heroicons_outline:plus"),t.R7$(3),t.Y8G("navigation",i.menuData)("inner",!0)("mode","side")("opened",!0))},dependencies:[C.Hl,C.$z,R.m_,R.An,ot.Xs],styles:["mailbox-sidebar fuse-vertical-navigation .fuse-vertical-navigation-wrapper{box-shadow:none!important}\n"],encapsulation:2})}}return n})();var le=c(27115);const ae=["drawer"];let Ut=(()=>{class n{constructor(e){this._fuseMediaWatcherService=e,this.drawerMode="side",this.drawerOpened=!0,this._unsubscribeAll=new q.B}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("md")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(le.F))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["mailbox"]],viewQuery:function(o,i){if(1&o&&t.GBs(ae,5),2&o){let s;t.mGM(s=t.lsd())&&(i.drawer=s.first)}},standalone:!0,features:[t.aNF],decls:8,vars:2,consts:[["drawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"mode","opened"],[1,"flex","flex-col","overflow-hidden"],[1,"flex","flex-auto","overflow-hidden"]],template:function(o,i){1&o&&(t.j41(0,"div",1)(1,"mat-drawer-container",2)(2,"mat-drawer",3,0),t.nrm(4,"mailbox-sidebar"),t.k0s(),t.j41(5,"mat-drawer-content",4)(6,"div",5),t.nrm(7,"router-outlet"),t.k0s()()()()),2&o&&(t.R7$(2),t.Y8G("mode",i.drawerMode)("opened",i.drawerOpened))},dependencies:[tt.vg,tt.qe,tt.$C,tt.$l,se,$.n3],encapsulation:2})}}return n})();const re=["mailList"],Ht=n=>[n],ce=(n,a)=>({"border-primary":n,"bg-primary-50 dark:bg-black dark:bg-opacity-5":a}),de=(n,a)=>({"absolute inset-0 z-20 flex lg:static lg:inset-auto":n,"hidden lg:flex":a});function ue(n,a){1&n&&t.nrm(0,"mat-progress-bar",14),2&n&&t.Y8G("mode","indeterminate")}function me(n,a){1&n&&t.nrm(0,"mat-icon",21),2&n&&t.Y8G("svgIcon","heroicons_solid:exclamation-circle")}function he(n,a){1&n&&t.nrm(0,"mat-icon",27),2&n&&t.Y8G("svgIcon","heroicons_solid:paper-clip")}function fe(n,a){1&n&&t.nrm(0,"mat-icon",28),2&n&&t.Y8G("svgIcon","heroicons_solid:star")}function pe(n,a){if(1&n&&(t.j41(0,"div",25),t.DNE(1,he,1,1,"mat-icon",27)(2,fe,1,1,"mat-icon",28),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.vxM(e.attachments&&e.attachments.length>0?1:-1),t.R7$(),t.vxM(e.starred?2:-1)}}function ge(n,a){if(1&n){const e=t.RV6();t.j41(0,"a",17),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.onMailSelected(i))}),t.j41(1,"div",18)(2,"div",19)(3,"div",20),t.EFF(4),t.k0s(),t.DNE(5,me,1,1,"mat-icon",21),t.j41(6,"div",22),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"div",23)(10,"span",24),t.EFF(11),t.k0s(),t.DNE(12,pe,3,2,"div",25),t.k0s(),t.j41(13,"div",26),t.EFF(14),t.k0s()()()}if(2&n){const e=a.$implicit,o=t.XpG(2);t.Y8G("routerLink",t.eq3(11,Ht,e.id)),t.R7$(),t.Y8G("ngClass",t.l_i(13,ce,e.unread,o.selectedMail&&o.selectedMail.id===e.id)),t.R7$(3),t.SpI(" ",e.from.contact.split("<")[0].trim()," "),t.R7$(),t.vxM(e.important?5:-1),t.R7$(2),t.SpI(" ",t.i5U(8,8,e.date,"LLL dd")," "),t.R7$(4),t.JRh(e.subject),t.R7$(),t.vxM(e.attachments&&e.attachments.length>0||e.starred?12:-1),t.R7$(2),t.SpI(" ",e.content,"... ")}}function be(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",5)(2,"div",6)(3,"button",7),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.mailboxComponent.drawer.toggle())}),t.nrm(4,"mat-icon",8),t.k0s(),t.j41(5,"div",9),t.EFF(6),t.k0s()(),t.j41(7,"div",6)(8,"div",10)(9,"span"),t.EFF(10),t.k0s(),t.j41(11,"span",11),t.EFF(12,"-"),t.k0s(),t.j41(13,"span"),t.EFF(14),t.k0s(),t.j41(15,"span",11),t.EFF(16,"of"),t.k0s(),t.j41(17,"span"),t.EFF(18),t.k0s()(),t.j41(19,"a",12),t.nrm(20,"mat-icon",13),t.k0s(),t.j41(21,"a",12),t.nrm(22,"mat-icon",13),t.k0s()(),t.DNE(23,ue,1,1,"mat-progress-bar",14),t.k0s(),t.j41(24,"div",15,0),t.Z7z(26,ge,15,16,"a",16,t.BUC().trackByFn,!0),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("svgIcon","heroicons_outline:bars-3"),t.R7$(2),t.SpI(" ",e.category.name," "),t.R7$(4),t.JRh(e.pagination.startIndex+1),t.R7$(4),t.JRh(e.pagination.endIndex+1),t.R7$(4),t.JRh(e.pagination.totalResults),t.R7$(),t.Y8G("disabled",1===e.pagination.currentPage)("routerLink",t.eq3(12,Ht,"../"+(e.pagination.currentPage>1?e.pagination.currentPage-1:1))),t.R7$(),t.Y8G("svgIcon","heroicons_solid:chevron-left"),t.R7$(),t.Y8G("disabled",e.pagination.currentPage===e.pagination.lastPage)("routerLink",t.eq3(14,Ht,"../"+(e.pagination.currentPage<e.pagination.lastPage?e.pagination.currentPage+1:e.pagination.lastPage))),t.R7$(),t.Y8G("svgIcon","heroicons_solid:chevron-right"),t.R7$(),t.vxM(e.mailsLoading?23:-1),t.R7$(3),t.Dyx(e.mails)}}function ve(n,a){1&n&&(t.j41(0,"div",3),t.nrm(1,"mat-icon",29),t.j41(2,"div",30),t.EFF(3," There are no e-mails "),t.k0s()()),2&n&&(t.R7$(),t.Y8G("svgIcon","heroicons_outline:envelope"))}function xe(n,a){if(1&n&&(t.j41(0,"div",4),t.nrm(1,"router-outlet"),t.k0s()),2&n){const e=t.XpG();t.Y8G("ngClass",t.l_i(1,de,e.selectedMail&&e.selectedMail.id,!e.selectedMail||!e.selectedMail.id))}}let _e=(()=>{class n{constructor(e,o){this.mailboxComponent=e,this._mailboxService=o,this.mailsLoading=!1,this._unsubscribeAll=new q.B}ngOnInit(){this._mailboxService.category$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.category=e}),this._mailboxService.mails$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.mails=e}),this._mailboxService.mailsLoading$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.mailsLoading=e,this.mailList&&!e&&this.mailList.nativeElement.scrollTo(0,0)}),this._mailboxService.pagination$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e}),this._mailboxService.mail$.pipe((0,M.Q)(this._unsubscribeAll)).subscribe(e=>{this.selectedMail=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onMailSelected(e){e.unread&&(e.unread=!1,this._mailboxService.updateMail(e.id,{unread:!1}).subscribe()),this._mailboxService.selectedMailChanged.next(e)}trackByFn(e,o){return o.id||e}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Ut),t.rXU(L))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["mailbox-list"]],viewQuery:function(o,i){if(1&o&&t.GBs(re,5),2&o){let s;t.mGM(s=t.lsd())&&(i.mailList=s.first)}},standalone:!0,features:[t.aNF],decls:4,vars:2,consts:[["mailList",""],[1,"bg-card","relative","flex","w-full","flex-auto","dark:bg-transparent"],[1,"relative","z-10","flex","w-full","min-w-0","flex-auto","flex-col","border-r","lg:min-w-90","lg:max-w-90"],[1,"z-100","absolute","inset-0","flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"flex-auto",3,"ngClass"],[1,"relative","flex","h-16","flex-0","items-center","justify-between","border-b","bg-gray-50","px-4","dark:bg-transparent"],[1,"flex","items-center"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"ml-2","font-semibold","uppercase"],[1,"mr-3","flex","items-center","text-md","font-medium"],[1,"text-secondary","mx-1"],["mat-icon-button","",1,"h-8","min-h-8","w-8",3,"disabled","routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"absolute","inset-x-0","bottom-0","h-0.5",3,"mode"],[1,"overflow-y-auto"],[1,"relative","flex","border-t","hover:bg-hover","first:border-0",3,"routerLink"],[1,"relative","flex","border-t","hover:bg-hover","first:border-0",3,"click","routerLink"],[1,"flex","w-full","flex-col","items-start","justify-start","border-l-4","border-transparent","py-6","pl-5","pr-4",3,"ngClass"],[1,"flex","w-full","items-center"],[1,"mr-2","truncate","font-semibold"],[1,"mr-3","text-red-500","icon-size-4","dark:text-red-600",3,"svgIcon"],[1,"text-hint","ml-auto","whitespace-nowrap","text-right","text-md"],[1,"mt-1","flex","w-full","items-center"],[1,"truncate","leading-4"],[1,"ml-auto","flex","pl-2"],[1,"text-secondary","mt-2","line-clamp-2","leading-normal"],[1,"flex","justify-center","icon-size-4",3,"svgIcon"],[1,"ml-1","flex","justify-center","text-orange-500","icon-size-4","dark:text-orange-400",3,"svgIcon"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(o,i){1&o&&(t.j41(0,"div",1),t.DNE(1,be,28,16,"div",2)(2,ve,4,1,"div",3)(3,xe,2,4,"div",4),t.k0s()),2&o&&(t.R7$(),t.vxM(i.mails&&i.mails.length>0?1:2),t.R7$(2),t.vxM(i.mails&&i.mails.length>0?3:-1))},dependencies:[C.Hl,C.pQ,C.iY,R.m_,R.An,$.Wk,xt.PO,xt.HM,j.YU,$.n3,j.vh],encapsulation:2})}}return n})();var Wt=c(82798);function Ce(n,a){1&n&&t.nrm(0,"mat-icon",21),2&n&&t.Y8G("svgIcon","heroicons_outline:check")}function ye(n,a){if(1&n&&(t.j41(0,"mat-option",17,0),t.DNE(2,Ce,1,1,"mat-icon",21),t.nrm(3,"span",22),t.k0s()),2&n){const e=a.$implicit,o=t.sdS(1),i=t.XpG();t.Y8G("value",e),t.R7$(2),t.vxM(o.selected?2:-1),t.R7$(),t.Y8G("ngClass",i.labelColorDefs[e].bg)}}function Me(n,a){1&n&&t.nrm(0,"mat-icon",21),2&n&&t.Y8G("svgIcon","heroicons_outline:check")}function Fe(n,a){if(1&n&&(t.j41(0,"mat-option",17,0),t.DNE(2,Me,1,1,"mat-icon",21),t.nrm(3,"span",22),t.k0s()),2&n){const e=a.$implicit,o=t.sdS(1),i=t.XpG(2);t.Y8G("value",e),t.R7$(2),t.vxM(o.selected?2:-1),t.R7$(),t.Y8G("ngClass",i.labelColorDefs[e].bg)}}function Re(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-form-field",10),t.nrm(1,"input",23),t.j41(2,"mat-select",24)(3,"mat-select-trigger",13),t.nrm(4,"mat-icon",14),t.k0s(),t.j41(5,"div",15),t.EFF(6," Label color "),t.k0s(),t.j41(7,"div",16),t.Z7z(8,Fe,4,3,"mat-option",17,t.fX1),t.k0s()(),t.j41(10,"button",25),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.deleteLabel(i.get("id").value))}),t.nrm(11,"mat-icon",19),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG();t.R7$(),t.Y8G("formControl",e.get("title")),t.R7$(),t.Y8G("formControl",e.get("color"))("disableOptionCentering",!0),t.R7$(2),t.Y8G("ngClass",o.labelColorDefs[e.get("color").value].text)("svgIcon","heroicons_outline:tag"),t.R7$(4),t.Dyx(o.labelColors),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:trash")}}let Ee=(()=>{class n{constructor(e,o,i){this.mailboxComponent=e,this._formBuilder=o,this._mailboxService=i,this.labelColors=dt,this.labelColorDefs=J}ngOnInit(){this.labelsForm=this._formBuilder.group({labels:this._formBuilder.array([]),newLabel:this._formBuilder.group({title:["",m.k0.required],color:["orange"]})}),this._mailboxService.labels$.pipe((0,X.s)(1)).subscribe(e=>{this.labels=e,e.forEach(o=>{const i=this._formBuilder.group({id:[o.id],title:[o.title,m.k0.required],slug:[o.slug],color:[o.color]});this.labelsForm.get("labels").push(i)})}),this.labelsForm.get("labels").valueChanges.pipe((0,p.B)(500)).subscribe(()=>{this.updateLabels()})}addLabel(){this._mailboxService.addLabel(this.labelsForm.get("newLabel").value).subscribe(e=>{this.labelsForm.get("labels").push(this._formBuilder.group({id:[e.id],title:[e.title,m.k0.required],slug:[e.slug],color:[e.color]})),this.labelsForm.get("newLabel").markAsPristine(),this.labelsForm.get("newLabel").markAsUntouched(),this.labelsForm.get("newLabel.title").reset(),this.labelsForm.get("newLabel.title").clearValidators(),this.labelsForm.get("newLabel.title").updateValueAndValidity()})}deleteLabel(e){const o=this.labelsForm.get("labels");o.removeAt(o.value.findIndex(i=>i.id===e)),this._mailboxService.deleteLabel(e).subscribe()}updateLabels(){this.labelsForm.get("labels").controls.forEach(e=>{e.dirty&&this._mailboxService.updateLabel(e.value.id,e.value).subscribe()}),this.labelsForm.get("labels").markAsPristine(),this.labelsForm.get("labels").markAsUntouched()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Ut),t.rXU(m.ze),t.rXU(L))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["mailbox-settings"]],standalone:!0,features:[t.aNF],decls:29,vars:12,consts:[["matOption","matOption"],[1,"flex","flex-auto","flex-col","overflow-y-auto","p-8"],[1,"flex","items-center"],[1,"-ml-2","mr-3","md:hidden"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"text-3xl","font-extrabold","tracking-tight"],[1,"text-secondary"],[1,"mt-8",3,"formGroup"],[1,"mt-6","flex","w-full","max-w-80","items-center","justify-start",3,"formGroupName"],[1,"w-full"],["matInput","",3,"formControlName","placeholder"],["matPrefix","",3,"formControlName","disableOptionCentering"],[1,"h-6"],[3,"ngClass","svgIcon"],[1,"px-4","pt-5","text-xl","font-semibold"],[1,"mx-3","my-4","-mr-5","flex","w-48","flex-wrap"],[1,"relative","flex","h-12","w-12","cursor-pointer","rounded-full","bg-transparent","p-0",3,"value"],["mat-icon-button","","matSuffix","",3,"click","disabled"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","w-full","max-w-80","flex-col",3,"formArrayName"],[1,"absolute","m-3","text-white",3,"svgIcon"],[1,"m-1","flex","h-10","w-10","rounded-full",3,"ngClass"],["matInput","",3,"formControl"],["matPrefix","",3,"formControl","disableOptionCentering"],["mat-icon-button","","matSuffix","",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),t.bIt("click",function(){return i.mailboxComponent.drawer.toggle()}),t.nrm(4,"mat-icon",5),t.k0s()(),t.j41(5,"div")(6,"div",6),t.EFF(7," Manage Labels "),t.k0s(),t.j41(8,"div",7),t.EFF(9,"Create, update and delete labels"),t.k0s()()(),t.j41(10,"form",8)(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),t.EFF(14,"New Label"),t.k0s(),t.nrm(15,"input",11),t.j41(16,"mat-select",12)(17,"mat-select-trigger",13),t.nrm(18,"mat-icon",14),t.k0s(),t.j41(19,"div",15),t.EFF(20," Label color "),t.k0s(),t.j41(21,"div",16),t.Z7z(22,ye,4,3,"mat-option",17,t.fX1),t.k0s()(),t.j41(24,"button",18),t.bIt("click",function(){return i.addLabel()}),t.nrm(25,"mat-icon",19),t.k0s()()(),t.j41(26,"div",20),t.Z7z(27,Re,12,6,"mat-form-field",10,t.fX1),t.k0s()()()),2&o&&(t.R7$(4),t.Y8G("svgIcon","heroicons_outline:bars-3"),t.R7$(6),t.Y8G("formGroup",i.labelsForm),t.R7$(),t.Y8G("formGroupName","newLabel"),t.R7$(4),t.Y8G("formControlName","title")("placeholder","Label title"),t.R7$(),t.Y8G("formControlName","color")("disableOptionCentering",!0),t.R7$(2),t.Y8G("ngClass",i.labelColorDefs[i.labelsForm.get("newLabel.color").value].text)("svgIcon","heroicons_outline:tag"),t.R7$(4),t.Dyx(i.labelColors),t.R7$(2),t.Y8G("disabled",!i.labelsForm.get("newLabel").valid||!i.labelsForm.get("newLabel").dirty),t.R7$(),t.Y8G("svgIcon","heroicons_solid:plus-circle"),t.R7$(),t.Y8G("formArrayName","labels"),t.R7$(),t.Dyx(i.labelsForm.get("labels").controls))},dependencies:[C.Hl,C.iY,R.m_,R.An,m.YN,m.qT,m.me,m.BC,m.cb,m.X1,m.l_,m.j4,m.JD,m.$R,m.v8,y.RG,y.rl,y.nJ,y.JW,y.yw,V.fS,V.fg,Wt.Ve,Wt.VO,Wt.$2,H.wT,j.YU,H.Sy],encapsulation:2})}}return n})();var ke=c(67130),je=c(27468),Te=c(70980),Kt=c(99437);const we=[{path:"",redirectTo:"inbox/1",pathMatch:"full"},{path:"filter/:filter",redirectTo:"filter/:filter/1",pathMatch:"full"},{path:"label/:label",redirectTo:"label/:label/1",pathMatch:"full"},{path:":folder",redirectTo:":folder/1",pathMatch:"full"},{path:"",component:Ut,resolve:{filters:()=>(0,t.WQX)(L).getFilters(),folders:()=>(0,t.WQX)(L).getFolders(),labels:()=>(0,t.WQX)(L).getLabels()},children:[{component:_e,matcher:n=>{let a=n;const e={};return"settings"===n[0].path?null:("filter"===n[0].path||"label"===n[0].path?(e[n[0].path]=n[1],e.page=n[2],n[3]&&(a=n.slice(0,-1))):(e.folder=n[0],e.page=n[1],n[2]&&(a=n.slice(0,-1))),{consumed:a,posParams:e})},runGuardsAndResolvers:(n,a)=>{let e=n;for(;e.firstChild;)e=e.firstChild;let o=a;for(;o.firstChild;)o=o.firstChild;if(e.paramMap.get("id")&&!o.paramMap.get("id"))return!0;const i={},s={};return n.paramMap.keys.forEach(d=>{i[d]=n.paramMap.get(d)}),a.paramMap.keys.forEach(d=>{s[d]=a.paramMap.get(d)}),!(0,ke.A)(i,s)},resolve:{mails:(n,a)=>{const e=(0,t.WQX)(L),o=(0,t.WQX)($.Ix);if(n.paramMap.get("page")&&parseInt(n.paramMap.get("page"),10)<=0){const s=a.url.split("/").slice(0,-1).join("/")+"/1";return o.navigateByUrl(s),!1}const i=[];return n.paramMap.get("folder")&&i.push(e.getMailsByFolder(n.paramMap.get("folder"),n.paramMap.get("page"))),n.paramMap.get("filter")&&i.push(e.getMailsByFilter(n.paramMap.get("filter"),n.paramMap.get("page"))),n.paramMap.get("label")&&i.push(e.getMailsByLabel(n.paramMap.get("label"),n.paramMap.get("page"))),(0,je.p)(i).pipe((0,Te.j)(()=>{let s=n;for(;s.firstChild;)s=s.firstChild;s.paramMap.get("id")||e.resetMail().subscribe()}),(0,Kt.W)(s=>{console.error(s.message);const d=a.url.split("/").slice(0,-1).join("/")+"/"+s.pagination.lastPage;return o.navigateByUrl(d),(0,Q.$)(s)}))}},children:[{path:"",pathMatch:"full",component:vt},{path:":id",component:Pt,resolve:{mail:(n,a)=>{const e=(0,t.WQX)(L),o=(0,t.WQX)($.Ix);return e.getMailById(n.paramMap.get("id")).pipe((0,Kt.W)(i=>{console.error(i);const s=a.url.split("/").slice(0,-1).join("/");return o.navigateByUrl(s),(0,Q.$)(i)}))}}}]},{path:"settings",component:Ee}]}]},67130:(Zt,rt,c)=>{c.d(rt,{A:()=>Ct});var t=c(85401),$=c(72291);function y(l){var r=-1,h=null==l?0:l.length;for(this.__data__=new $.A;++r<h;)this.add(l[r])}y.prototype.add=y.prototype.push=function j(l){return this.__data__.set(l,"__lodash_hash_undefined__"),this},y.prototype.has=function ct(l){return this.__data__.has(l)};const R=y,W=function V(l,r){for(var h=-1,f=null==l?0:l.length;++h<f;)if(r(l[h],h,l))return!0;return!1},Ft=function q(l,r){return l.has(r)},dt=function Et(l,r,h,f,v,u){var b=1&h,F=l.length,x=r.length;if(F!=x&&!(b&&x>F))return!1;var _=u.get(l),S=u.get(r);if(_&&S)return _==r&&S==l;var E=-1,p=!0,G=2&h?new R:void 0;for(u.set(l,r),u.set(r,l);++E<F;){var k=l[E],T=r[E];if(f)var O=b?f(T,k,E,r,l,u):f(k,T,E,l,r,u);if(void 0!==O){if(O)continue;p=!1;break}if(G){if(!W(r,function(D,Y){if(!Ft(G,Y)&&(k===D||v(k,D,h,f,u)))return G.push(Y)})){p=!1;break}}else if(k!==T&&!v(k,T,h,f,u)){p=!1;break}}return u.delete(l),u.delete(r),p};var J=c(6944),I=c(26509),A=c(61319);const Q=function N(l){var r=-1,h=Array(l.size);return l.forEach(function(f,v){h[++r]=[v,f]}),h},X=function P(l){var r=-1,h=Array(l.size);return l.forEach(function(f){h[++r]=f}),h};var ut=J.A?J.A.prototype:void 0,nt=ut?ut.valueOf:void 0;var mt=c(67895),Vt=Object.prototype.hasOwnProperty;var ht=c(81350),ft=c(43744),pt=c(39377),zt=c(28885),gt="[object Arguments]",bt="[object Array]",Z="[object Object]",vt=Object.prototype.hasOwnProperty;const tt=function xt(l,r,h,f,v,u){var b=(0,ft.A)(l),F=(0,ft.A)(r),x=b?bt:(0,ht.A)(l),_=F?bt:(0,ht.A)(r),S=(x=x==gt?Z:x)==Z,E=(_=_==gt?Z:_)==Z,p=x==_;if(p&&(0,pt.A)(l)){if(!(0,pt.A)(r))return!1;b=!0,S=!1}if(p&&!S)return u||(u=new t.A),b||(0,zt.A)(l)?dt(l,r,h,f,v,u):function Ot(l,r,h,f,v,u,b){switch(h){case"[object DataView]":if(l.byteLength!=r.byteLength||l.byteOffset!=r.byteOffset)return!1;l=l.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(l.byteLength!=r.byteLength||!u(new I.A(l),new I.A(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,A.A)(+l,+r);case"[object Error]":return l.name==r.name&&l.message==r.message;case"[object RegExp]":case"[object String]":return l==r+"";case"[object Map]":var F=Q;case"[object Set]":if(F||(F=X),l.size!=r.size&&!(1&f))return!1;var _=b.get(l);if(_)return _==r;f|=2,b.set(l,r);var S=dt(F(l),F(r),f,v,u,b);return b.delete(l),S;case"[object Symbol]":if(nt)return nt.call(l)==nt.call(r)}return!1}(l,r,x,h,f,v,u);if(!(1&h)){var G=S&&vt.call(l,"__wrapped__"),k=E&&vt.call(r,"__wrapped__");if(G||k){var T=G?l.value():l,O=k?r.value():r;return u||(u=new t.A),v(T,O,h,f,u)}}return!!p&&(u||(u=new t.A),function Qt(l,r,h,f,v,u){var b=1&h,F=(0,mt.A)(l),x=F.length;if(x!=(0,mt.A)(r).length&&!b)return!1;for(var E=x;E--;){var p=F[E];if(!(b?p in r:Vt.call(r,p)))return!1}var G=u.get(l),k=u.get(r);if(G&&k)return G==r&&k==l;var T=!0;u.set(l,r),u.set(r,l);for(var O=b;++E<x;){var D=l[p=F[E]],Y=r[p];if(f)var yt=b?f(Y,D,p,r,l,u):f(D,Y,p,l,r,u);if(!(void 0===yt?D===Y||v(D,Y,h,f,u):yt)){T=!1;break}O||(O="constructor"==p)}if(T&&!O){var et=l.constructor,it=r.constructor;et!=it&&"constructor"in l&&"constructor"in r&&!("function"==typeof et&&et instanceof et&&"function"==typeof it&&it instanceof it)&&(T=!1)}return u.delete(l),u.delete(r),T}(l,r,h,f,v,u))};var ot=c(42661);const _t=function m(l,r,h,f,v){return l===r||(null==l||null==r||!(0,ot.A)(l)&&!(0,ot.A)(r)?l!=l&&r!=r:tt(l,r,h,f,m,v))},Ct=function st(l,r){return _t(l,r)}}}]);