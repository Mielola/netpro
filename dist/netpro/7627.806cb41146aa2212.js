"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7627],{47627:(It,R,a)=>{a.r(R),a.d(R,{default:()=>Ft});var f=a(60177),d=a(88834),x=a(86600),p=a(53719),h=a(99213),N=a(59042),k=a(90882),L=a(87122),t=a(54438);const S=n=>({$implicit:n});function w(n,l){1&n&&t.eu8(0)}let X=(()=>{class n{constructor(){this.items=[],this.distributedColumns=[]}ngOnChanges(e){"columns"in e&&this._distributeItems(),"items"in e&&this._distributeItems()}ngAfterViewInit(){this._distributeItems()}_distributeItems(){if(0!==this.items.length){this.distributedColumns=Array.from(Array(this.columns),e=>({items:[]}));for(let e=0;e<this.items.length;e++)this.distributedColumns[e%this.columns].items.push(this.items[e])}else this.distributedColumns=[]}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["fuse-masonry"]],inputs:{columnsTemplate:"columnsTemplate",columns:"columns",items:"items"},exportAs:["fuseMasonry"],standalone:!0,features:[t.OA$,t.aNF],decls:2,vars:4,consts:[[1,"flex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.DNE(1,w,1,0,"ng-container",1),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngTemplateOutlet",i.columnsTemplate)("ngTemplateOutletContext",t.eq3(2,S,i.distributedColumns)))},dependencies:[f.T3],encapsulation:2,data:{animation:L.X}})}}return n})();var T=a(37403),_=a(89417),I=a(82765),m=a(75351),j=a(59115),C=a(21413),D=a(7673),$=a(56977),G=a(70152),u=a(25558),b=a(96354),B=a(33446),v=a(84412),g=a(88141),V=a(96697),Y=a(18810),E=a(21626);let y=(()=>{class n{constructor(e){this._httpClient=e,this._labels=new v.t(null),this._note=new v.t(null),this._notes=new v.t(null)}get labels$(){return this._labels.asObservable()}get notes$(){return this._notes.asObservable()}get note$(){return this._note.asObservable()}getLabels(){return this._httpClient.get("api/apps/notes/labels").pipe((0,g.M)(e=>{this._labels.next(e)}))}addLabel(e){return this._httpClient.post("api/apps/notes/labels",{title:e}).pipe((0,g.M)(o=>{this._labels.next(o)}))}updateLabel(e){return this._httpClient.patch("api/apps/notes/labels",{label:e}).pipe((0,g.M)(o=>{this.getNotes().subscribe(),this._labels.next(o)}))}deleteLabel(e){return this._httpClient.delete("api/apps/notes/labels",{params:{id:e}}).pipe((0,g.M)(o=>{this.getNotes().subscribe(),this._labels.next(o)}))}getNotes(){return this._httpClient.get("api/apps/notes/all").pipe((0,g.M)(e=>{this._notes.next(e)}))}getNoteById(e){return this._notes.pipe((0,V.s)(1),(0,b.T)(o=>{const i=o.find(s=>s.id===e)||null;return this._note.next(i),i}),(0,u.n)(o=>o?(0,D.of)(o):(0,Y.$)("Could not found the note with id of "+e+"!")))}addTask(e,o){return this._httpClient.post("api/apps/notes/tasks",{note:e,task:o}).pipe((0,u.n)(()=>this.getNotes().pipe((0,u.n)(()=>this.getNoteById(e.id)))))}createNote(e){return this._httpClient.post("api/apps/notes",{note:e}).pipe((0,u.n)(o=>this.getNotes().pipe((0,u.n)(()=>this.getNoteById(o.id).pipe((0,b.T)(()=>o))))))}updateNote(e){const o=(0,B.A)(e);return o.labels.length&&(o.labels=o.labels.map(i=>i.id)),this._httpClient.patch("api/apps/notes",{updatedNote:o}).pipe((0,g.M)(i=>{this.getNotes().subscribe()}))}deleteNote(e){return this._httpClient.delete("api/apps/notes",{params:{id:e.id}}).pipe((0,b.T)(o=>(this.getNotes().subscribe(),o)))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(E.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const A=n=>({"text-secondary line-through":n});function U(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",5)(1,"div",13)(2,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG(),s=t.XpG();return t.Njj(s.removeImage(i))}),t.nrm(3,"mat-icon",15),t.k0s()(),t.nrm(4,"img",16),t.k0s()}if(2&n){const e=t.XpG();t.R7$(3),t.Y8G("svgIcon","heroicons_outline:trash"),t.R7$(),t.Y8G("src",e.image,t.B4B)}}function O(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",17)(1,"mat-checkbox",21),t.mxI("ngModelChange",function(i){const s=t.eBV(e).$implicit;return t.DH7(s.completed,i)||(s.completed=i),t.Njj(i)}),t.bIt("change",function(){const i=t.eBV(e).$implicit,s=t.XpG(2),r=t.XpG();return t.Njj(r.updateTaskOnNote(s,i))}),t.k0s(),t.j41(2,"input",22),t.mxI("ngModelChange",function(i){const s=t.eBV(e).$implicit;return t.DH7(s.content,i)||(s.content=i),t.Njj(i)}),t.bIt("input",function(){const i=t.eBV(e).$implicit,s=t.XpG(2),r=t.XpG();return t.Njj(r.updateTaskOnNote(s,i))}),t.k0s(),t.j41(3,"mat-icon",23),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2),r=t.XpG();return t.Njj(r.removeTaskFromNote(s,i))}),t.k0s()()}if(2&n){const e=l.$implicit;t.R7$(),t.Y8G("color","primary"),t.R50("ngModel",e.completed),t.R7$(),t.Y8G("ngClass",t.eq3(6,A,e.completed))("placeholder","Task"),t.R50("ngModel",e.content),t.R7$(),t.Y8G("svgIcon","heroicons_solid:x-mark")}}function z(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",9),t.Z7z(1,O,4,8,"div",17,t.BUC().trackByFn,!0),t.j41(3,"div",18),t.nrm(4,"mat-icon",19),t.j41(5,"input",20,0),t.bIt("keydown.enter",function(){t.eBV(e);const i=t.sdS(6),s=t.XpG();return t.XpG().addTaskToNote(s,i.value),t.Njj(i.value="")}),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(),t.Dyx(e.tasks),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:plus"),t.R7$(),t.Y8G("placeholder","Add task")}}function H(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",24)(1,"div"),t.EFF(2),t.k0s(),t.j41(3,"mat-icon",25),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2),r=t.XpG();return t.Njj(r.toggleLabelOnNote(s,i))}),t.k0s()()}if(2&n){const e=l.$implicit;t.R7$(2),t.SpI(" ",e.title," "),t.R7$(),t.Y8G("svgIcon","heroicons_solid:x-circle")}}function Z(n,l){if(1&n&&(t.j41(0,"div",10),t.Z7z(1,H,4,2,"div",24,t.BUC().trackByFn,!0),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Dyx(e.labels)}}function J(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",11)(1,"button",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG(),s=t.XpG();return t.Njj(s.createNote(i))}),t.EFF(2," Save "),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("color","primary")("disabled",!e.title&&!e.content)}}function Q(n,l){if(1&n){const e=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(3),r=t.XpG();return t.Njj(r.toggleLabelOnNote(s,i))}),t.j41(1,"span",18),t.nrm(2,"mat-checkbox",35),t.j41(3,"span",36),t.EFF(4),t.k0s()()()}if(2&n){const e=l.$implicit,o=t.XpG(3),i=t.XpG();t.R7$(2),t.Y8G("color","primary")("checked",i.isNoteHasLabel(o,e)),t.R7$(2),t.JRh(e.title)}}function W(n,l){1&n&&t.Z7z(0,Q,5,3,"button",33,t.fX1),2&n&&t.Dyx(l)}function P(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",12)(1,"div",27)(2,"div")(3,"input",28,1),t.bIt("change",function(){t.eBV(e);const i=t.sdS(4),s=t.XpG(),r=t.XpG();return t.Njj(r.uploadImage(s,i.files))}),t.k0s(),t.j41(5,"label",29),t.nrm(6,"mat-icon",30),t.k0s()(),t.j41(7,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG(),s=t.XpG();return t.Njj(s.addTasksToNote(i))}),t.nrm(8,"mat-icon",30),t.k0s(),t.j41(9,"button",31),t.nrm(10,"mat-icon",30),t.k0s(),t.j41(11,"mat-menu",null,2),t.DNE(13,W,2,0),t.nI1(14,"async"),t.k0s(),t.j41(15,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG(),s=t.XpG();return t.Njj(s.toggleArchiveOnNote(i))}),t.nrm(16,"mat-icon",30),t.k0s(),t.j41(17,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG(),s=t.XpG();return t.Njj(s.deleteNote(i))}),t.nrm(18,"mat-icon",30),t.k0s()(),t.j41(19,"button",32),t.EFF(20,"Close"),t.k0s()()}if(2&n){let e;const o=t.sdS(12),i=t.XpG(2);t.R7$(3),t.Y8G("multiple",!1)("accept","image/jpeg, image/png"),t.R7$(3),t.Y8G("svgIcon","heroicons_outline:photo"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:clipboard-document-list"),t.R7$(),t.Y8G("matMenuTriggerFor",o),t.R7$(),t.Y8G("svgIcon","heroicons_outline:tag"),t.R7$(3),t.vxM((e=t.bMT(14,9,i.labels$))?13:-1,e),t.R7$(3),t.Y8G("svgIcon","heroicons_outline:archive-box"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:trash")}}function K(n,l){if(1&n){const e=t.RV6();t.DNE(0,U,5,2,"div",5),t.j41(1,"div",4)(2,"div")(3,"input",6),t.mxI("ngModelChange",function(i){const s=t.eBV(e);return t.DH7(s.title,i)||(s.title=i),t.Njj(i)}),t.bIt("input",function(){const i=t.eBV(e),s=t.XpG();return t.Njj(s.updateNoteDetails(i))}),t.k0s()(),t.j41(4,"div",7)(5,"textarea",8),t.mxI("ngModelChange",function(i){const s=t.eBV(e);return t.DH7(s.content,i)||(s.content=i),t.Njj(i)}),t.bIt("input",function(){const i=t.eBV(e),s=t.XpG();return t.Njj(s.updateNoteDetails(i))}),t.k0s()(),t.DNE(6,z,7,2,"div",9)(7,Z,3,0,"div",10)(8,J,3,2,"div",11)(9,P,21,11,"div",12),t.k0s()}if(2&n){const e=l;t.vxM(e.image?0:-1),t.R7$(3),t.Y8G("placeholder","Title"),t.R50("ngModel",e.title),t.R7$(2),t.Y8G("placeholder","Note"),t.R50("ngModel",e.content),t.R7$(),t.vxM(e.tasks?6:-1),t.R7$(),t.vxM(e.labels&&e.labels.length?7:-1),t.R7$(),t.vxM(e.id?-1:8),t.R7$(),t.vxM(e.id?9:-1)}}let M=(()=>{class n{constructor(e,o,i,s){this._changeDetectorRef=e,this._data=o,this._notesService=i,this._matDialogRef=s,this.noteChanged=new C.B,this._unsubscribeAll=new C.B}ngOnInit(){this._data.note.id?(this._notesService.getNoteById(this._data.note.id).subscribe(),this.note$=this._notesService.note$):this.note$=(0,D.of)({id:null,title:"",content:"",tasks:null,image:null,reminder:null,labels:[],archived:!1,createdAt:null,updatedAt:null}),this.labels$=this._notesService.labels$,this.noteChanged.pipe((0,$.Q)(this._unsubscribeAll),(0,G.B)(500),(0,u.n)(e=>this._notesService.updateNote(e))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createNote(e){this._notesService.createNote(e).pipe((0,b.T)(()=>{this.note$=this._notesService.note$})).subscribe()}uploadImage(e,o){if(!o.length)return;const s=o[0];["image/jpeg","image/png"].includes(s.type)&&this._readAsDataURL(s).then(r=>{e.image=r,this.noteChanged.next(e)})}removeImage(e){e.image=null,this.noteChanged.next(e)}addTasksToNote(e){e.tasks||(e.tasks=[])}addTaskToNote(e,o){""!==o.trim()&&this._notesService.addTask(e,o).subscribe()}removeTaskFromNote(e,o){e.tasks=e.tasks.filter(i=>i.id!==o.id),this.noteChanged.next(e)}updateTaskOnNote(e,o){o.id&&this.noteChanged.next(e)}isNoteHasLabel(e,o){return!!e.labels.find(i=>i.id===o.id)}toggleLabelOnNote(e,o){this.isNoteHasLabel(e,o)?e.labels=e.labels.filter(i=>i.id!==o.id):e.labels.push(o),this.noteChanged.next(e)}toggleArchiveOnNote(e){e.archived=!e.archived,this.noteChanged.next(e),this._matDialogRef.close()}updateNoteDetails(e){this.noteChanged.next(e)}deleteNote(e){this._notesService.deleteNote(e).subscribe(o=>{o&&this._matDialogRef.close()})}trackByFn(e,o){return o.id||e}_readAsDataURL(e){return new Promise((o,i)=>{const s=new FileReader;s.onload=()=>{o(s.result)},s.onerror=r=>{i(r)},s.readAsDataURL(e)})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(m.Vh),t.rXU(y),t.rXU(m.CP))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["notes-details"]],standalone:!0,features:[t.aNF],decls:3,vars:3,consts:[["newTaskInput",""],["imageFileInput",""],["labelsMenu","matMenu"],[1,"-m-6","flex","flex-auto","flex-col","md:w-160","md:min-w-160"],[1,"m-4"],[1,"relative","w-full"],[1,"w-full","p-2","text-2xl",3,"ngModelChange","input","placeholder","ngModel"],[1,"flex","w-full","px-2","py-5"],["cdkTextareaAutosize","",1,"w-full",3,"ngModelChange","input","placeholder","ngModel"],[1,"mx-2","mt-4","space-y-1.5"],[1,"mx-1","mt-6","flex","flex-wrap","items-center"],[1,"mt-4","flex","items-center","justify-end"],[1,"mt-4","flex","items-center","justify-between"],[1,"absolute","bottom-0","right-0","p-4"],["mat-icon-button","",3,"click"],[1,"text-white",3,"svgIcon"],[1,"w-full","object-cover",3,"src"],[1,"group","flex","items-center"],[1,"flex","items-center"],[1,"text-hint","-ml-0.5","icon-size-5",3,"svgIcon"],[1,"ml-1.5","w-full","px-1","py-0.5",3,"keydown.enter","placeholder"],[1,"flex","items-center",3,"ngModelChange","change","color","ngModel"],[1,"w-full","px-1","py-0.5",3,"ngModelChange","input","ngClass","placeholder","ngModel"],[1,"ml-auto","hidden","cursor-pointer","icon-size-5","group-hover:flex",3,"click","svgIcon"],[1,"m-1","flex","items-center","rounded-full","bg-gray-100","px-3","py-0.5","text-sm","font-medium","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"ml-1","cursor-pointer","icon-size-4",3,"click","svgIcon"],["mat-flat-button","",3,"click","color","disabled"],[1,"flex","items-center","space-x-2"],["id","image-file-input","type","file",1,"pointer-events-none","invisible","absolute","h-0","w-0","opacity-0",3,"change","multiple","accept"],["for","image-file-input","matRipple","",1,"flex","h-10","w-10","cursor-pointer","items-center","justify-center","rounded-full","hover:bg-gray-400","hover:bg-opacity-20","dark:hover:bg-black","dark:hover:bg-opacity-5"],[3,"svgIcon"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-flat-button","","matDialogClose",""],["mat-menu-item",""],["mat-menu-item","",3,"click"],["disableRipple","",1,"pointer-events-none","flex","items-center",3,"color","checked"],[1,"ml-1","leading-5"]],template:function(o,i){if(1&o&&(t.j41(0,"div",3),t.DNE(1,K,10,9,"div",4),t.nI1(2,"async"),t.k0s()),2&o){let s;t.R7$(),t.vxM((s=t.bMT(2,1,i.note$))?1:-1,s)}},dependencies:[d.Hl,d.$z,d.iY,h.m_,h.An,_.YN,_.me,_.BC,_.vS,T.EE,T.xb,I.g7,I.So,f.YU,x.pZ,x.r6,j.Cn,j.kk,j.fb,j.Cp,m.hM,m.tx,f.Jj],encapsulation:2,changeDetection:0})}}return n})();var q=a(5964);function tt(n,l){if(1&n){const e=t.RV6();t.j41(0,"mat-form-field",11)(1,"button",12),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.deleteLabel(i.id))}),t.nrm(2,"mat-icon",9),t.k0s(),t.j41(3,"input",13),t.mxI("ngModelChange",function(i){const s=t.eBV(e).$implicit;return t.DH7(s.title,i)||(s.title=i),t.Njj(i)}),t.bIt("input",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.updateLabel(i))}),t.k0s()()}if(2&n){const e=l.$implicit;t.R7$(2),t.Y8G("svgIcon","heroicons_solid:trash"),t.R7$(),t.Y8G("autocomplete","off"),t.R50("ngModel",e.title)}}function et(n,l){1&n&&t.Z7z(0,tt,4,3,"mat-form-field",11,t.BUC().trackByFn,!0),2&n&&t.Dyx(l)}let nt=(()=>{class n{constructor(e,o){this._changeDetectorRef=e,this._notesService=o,this.labelChanged=new C.B,this._unsubscribeAll=new C.B}ngOnInit(){this.labels$=this._notesService.labels$,this.labelChanged.pipe((0,$.Q)(this._unsubscribeAll),(0,G.B)(500),(0,q.p)(e=>""!==e.title.trim()),(0,u.n)(e=>this._notesService.updateLabel(e))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addLabel(e){this._notesService.addLabel(e).subscribe()}updateLabel(e){this.labelChanged.next(e)}deleteLabel(e){this._notesService.deleteLabel(e).subscribe(()=>{this._changeDetectorRef.markForCheck()})}trackByFn(e,o){return o.id||e}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(y))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["notes-labels"]],standalone:!0,features:[t.aNF],decls:14,vars:9,consts:[["newLabelInput",""],[1,"flex","w-80","min-w-80","flex-auto","flex-col","p-2","md:p-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold"],["matDialogClose","","mat-icon-button",""],[3,"svgIcon"],[1,"fuse-mat-dense","mt-8","w-full"],["name","new-label","matInput","",3,"autocomplete","placeholder"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","flex-col"],[1,"fuse-mat-dense","w-full"],["mat-icon-button","","matPrefix","",3,"click"],["required","","matInput","",3,"ngModelChange","input","autocomplete","ngModel"]],template:function(o,i){if(1&o){const s=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3,"Edit labels"),t.k0s(),t.j41(4,"button",4),t.nrm(5,"mat-icon",5),t.k0s()(),t.j41(6,"mat-form-field",6),t.nrm(7,"input",7,0),t.j41(9,"button",8),t.bIt("click",function(){t.eBV(s);const c=t.sdS(8);return i.addLabel(c.value),t.Njj(c.value="")}),t.nrm(10,"mat-icon",9),t.k0s()(),t.j41(11,"div",10),t.DNE(12,et,2,0),t.nI1(13,"async"),t.k0s()()}if(2&o){let s;const r=t.sdS(8);t.R7$(5),t.Y8G("svgIcon","heroicons_outline:x-mark"),t.R7$(2),t.Y8G("autocomplete","off")("placeholder","Create new label"),t.R7$(2),t.AVh("invisible",""===r.value.trim()),t.R7$(),t.Y8G("svgIcon","heroicons_solid:check-circle"),t.R7$(2),t.vxM((s=t.bMT(13,7,i.labels$))?12:-1,s)}},dependencies:[d.Hl,d.iY,m.hM,m.tx,h.m_,h.An,p.RG,p.rl,p.JW,p.yw,N.fS,N.fg,_.YN,_.me,_.BC,_.YS,_.vS,f.Jj],encapsulation:2,changeDetection:0})}}return n})();var ot=a(84572),it=a(23294),st=a(27115);const F=(n,l)=>({"bg-gray-200 text-primary dark:bg-gray-700 dark:text-primary-400":n,"text-hint hover:bg-hover":l}),lt=n=>({"text-secondary line-through":n});function at(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",8),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.filterByLabel(i.id))}),t.nrm(1,"mat-icon",9),t.j41(2,"div",10),t.EFF(3),t.k0s()()}if(2&n){const e=l.$implicit,o=t.XpG(2);t.Y8G("ngClass",t.l_i(4,F,"label:"+e.id===o.filterStatus,"label:"+e.id!==o.filterStatus))("matRippleDisabled","label:"+e.id===o.filterStatus),t.R7$(),t.Y8G("svgIcon","heroicons_outline:tag"),t.R7$(2),t.SpI(" ",e.title," ")}}function rt(n,l){1&n&&t.Z7z(0,at,4,7,"div",27,t.BUC().trackByFn,!0),2&n&&t.Dyx(l)}function ct(n,l){if(1&n&&t.nrm(0,"img",32),2&n){const e=t.XpG().$implicit;t.Y8G("src",e.image,t.B4B)}}function _t(n,l){if(1&n&&(t.j41(0,"div",34),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.title," ")}}function dt(n,l){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.AVh("text-xl",e.content.length<70),t.R7$(),t.SpI(" ",e.content," ")}}function pt(n,l){1&n&&(t.j41(0,"div",38),t.nrm(1,"div",41),t.k0s())}function mt(n,l){1&n&&t.nrm(0,"mat-icon",39),2&n&&t.Y8G("svgIcon","heroicons_solid:check-circle")}function ut(n,l){if(1&n&&(t.j41(0,"div",16),t.DNE(1,pt,2,0,"div",38)(2,mt,1,1,"mat-icon",39),t.j41(3,"div",40),t.EFF(4),t.k0s()()),2&n){const e=l.$implicit;t.R7$(),t.vxM(e.completed?-1:1),t.R7$(),t.vxM(e.completed?2:-1),t.R7$(),t.Y8G("ngClass",t.eq3(4,lt,e.completed)),t.R7$(),t.SpI(" ",e.content," ")}}function ft(n,l){if(1&n&&(t.j41(0,"div",36),t.Z7z(1,ut,5,6,"div",16,t.BUC().trackByFn,!0),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.Dyx(e.tasks)}}function ht(n,l){if(1&n&&(t.j41(0,"div",42),t.EFF(1),t.k0s()),2&n){const e=l.$implicit;t.R7$(),t.SpI(" ",e.title," ")}}function gt(n,l){if(1&n&&(t.j41(0,"div",37),t.Z7z(1,ht,2,1,"div",42,t.BUC().trackByFn,!0),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.Dyx(e.labels)}}function Ct(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",31),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(5);return t.Njj(s.openNoteDialog(i))}),t.DNE(1,ct,1,1,"img",32),t.j41(2,"div",33),t.DNE(3,_t,2,1,"div",34)(4,dt,2,3,"div",35)(5,ft,3,0,"div",36)(6,gt,3,0,"div",37),t.k0s()()}if(2&n){const e=l.$implicit;t.R7$(),t.vxM(e.image?1:-1),t.R7$(2),t.vxM(e.title?3:-1),t.R7$(),t.vxM(e.content?4:-1),t.R7$(),t.vxM(e.tasks?5:-1),t.R7$(),t.vxM(e.labels?6:-1)}}function bt(n,l){if(1&n&&(t.j41(0,"div",29),t.Z7z(1,Ct,7,5,"div",30,t.BUC().trackByFn,!0),t.k0s()),2&n){const e=l.$implicit;t.R7$(),t.Dyx(e.items)}}function vt(n,l){1&n&&t.Z7z(0,bt,3,0,"div",29,t.BUC().trackByFn,!0),2&n&&t.Dyx(l.$implicit)}function xt(n,l){if(1&n&&(t.j41(0,"fuse-masonry",28),t.DNE(1,vt,2,0,"ng-template",null,2,t.C5r),t.k0s()),2&n){const e=t.sdS(2),o=t.XpG(),i=t.XpG();t.Y8G("items",o)("columns",i.masonryColumns)("columnsTemplate",e)}}function Nt(n,l){1&n&&(t.j41(0,"div",26),t.nrm(1,"mat-icon",43),t.j41(2,"div",44),t.EFF(3," There are no notes! "),t.k0s()()),2&n&&(t.R7$(),t.Y8G("svgIcon","heroicons_outline:document"))}function kt(n,l){1&n&&t.DNE(0,xt,3,3,"fuse-masonry",28)(1,Nt,4,1,"div",26),2&n&&t.vxM(l.length?0:1)}function jt(n,l){1&n&&(t.j41(0,"div",26)(1,"div",44),t.EFF(2," Loading... "),t.k0s()())}let $t=(()=>{class n{constructor(e,o,i,s){this._changeDetectorRef=e,this._fuseMediaWatcherService=o,this._matDialog=i,this._notesService=s,this.drawerMode="side",this.drawerOpened=!0,this.filter$=new v.t("notes"),this.searchQuery$=new v.t(null),this.masonryColumns=4,this._unsubscribeAll=new C.B}get filterStatus(){return this.filter$.value}ngOnInit(){this._notesService.getLabels().subscribe(),this._notesService.getNotes().subscribe(),this.labels$=this._notesService.labels$,this.notes$=(0,ot.z)([this._notesService.notes$,this.filter$,this.searchQuery$]).pipe((0,it.F)(),(0,b.T)(([e,o,i])=>{if(!e||!e.length)return;let s=e;i&&(i=i.trim().toLowerCase(),s=s.filter(c=>c.title.toLowerCase().includes(i)||c.content.toLowerCase().includes(i)));const r="archived"===o;if(s=s.filter(c=>c.archived===r),o.startsWith("label:")){const c=o.split(":")[1];s=s.filter(Rt=>!!Rt.labels.find(Tt=>Tt.id===c))}return s})),this._fuseMediaWatcherService.onMediaChange$.pipe((0,$.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),this.masonryColumns=e.includes("xl")?5:e.includes("lg")?4:e.includes("md")?3:e.includes("sm")?2:1,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addNewNote(){this._matDialog.open(M,{autoFocus:!1,data:{note:{}}})}openEditLabelsDialog(){this._matDialog.open(nt,{autoFocus:!1})}openNoteDialog(e){this._matDialog.open(M,{autoFocus:!1,data:{note:(0,B.A)(e)}})}filterByArchived(){this.filter$.next("archived")}filterByLabel(e){this.filter$.next(`label:${e}`)}filterByQuery(e){this.searchQuery$.next(e)}resetFilter(){this.filter$.next("notes")}trackByFn(e,o){return o.id||e}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(st.F),t.rXU(m.bZ),t.rXU(y))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["notes-list"]],standalone:!0,features:[t.aNF],decls:37,vars:28,consts:[["drawer",""],["searchInput",""],["columnsTemplate",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","h-full","flex-auto","dark:bg-transparent"],[1,"bg-default","w-2/3","border-r-0","sm:w-72","lg:w-56",3,"mode","opened"],[1,"p-6","lg:py-8","lg:pl-4","lg:pr-0"],[1,"space-y-2"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium",3,"click","ngClass","matRippleDisabled"],[1,"text-current",3,"svgIcon"],[1,"text-default","ml-3","select-none","leading-5"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium","hover:bg-hover",3,"click"],[1,"text-hint",3,"svgIcon"],[1,"ml-3","select-none","leading-5"],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-auto","flex-col","p-6","md:p-8"],[1,"flex","items-center"],[1,"flex","flex-auto","items-center"],["mat-icon-button","",1,"-ml-2","flex","lg:hidden",3,"click"],[3,"svgIcon"],[1,"fuse-mat-rounded","fuse-mat-dense","ml-4","flex-auto","lg:ml-0",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","min-w-10","px-1","sm:px-4",3,"click","color"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","hidden","sm:inline-block"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium",3,"ngClass","matRippleDisabled"],[1,"-mx-2","mt-8",3,"items","columns","columnsTemplate"],[1,"flex-1","space-y-4","px-2"],[1,"bg-card","flex","cursor-pointer","flex-col","overflow-hidden","rounded-2xl","shadow"],[1,"bg-card","flex","cursor-pointer","flex-col","overflow-hidden","rounded-2xl","shadow",3,"click"],[1,"w-full","object-cover",3,"src"],[1,"flex","flex-auto","flex-col","space-y-4","p-6"],[1,"line-clamp-3","font-semibold"],[3,"text-xl"],[1,"space-y-1.5"],[1,"-m-1","flex","flex-wrap","items-center"],[1,"flex","h-5","w-5","items-center","justify-center"],[1,"text-hint","icon-size-5",3,"svgIcon"],[1,"ml-1.5","leading-5",3,"ngClass"],[1,"h-4","w-4","rounded-full","border-2"],[1,"m-1","rounded-full","bg-gray-100","px-3","py-0.5","text-sm","font-medium","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(o,i){if(1&o){const s=t.RV6();t.j41(0,"div",3)(1,"mat-drawer-container",4)(2,"mat-drawer",5,0)(4,"div",6)(5,"div",7)(6,"div",8),t.bIt("click",function(){return t.eBV(s),t.Njj(i.resetFilter())}),t.nrm(7,"mat-icon",9),t.j41(8,"div",10),t.EFF(9," Notes "),t.k0s()(),t.j41(10,"div",8),t.bIt("click",function(){return t.eBV(s),t.Njj(i.filterByArchived())}),t.nrm(11,"mat-icon",9),t.j41(12,"div",10),t.EFF(13," Archive "),t.k0s()(),t.DNE(14,rt,2,0),t.nI1(15,"async"),t.j41(16,"div",11),t.bIt("click",function(){return t.eBV(s),t.Njj(i.openEditLabelsDialog())}),t.nrm(17,"mat-icon",12),t.j41(18,"div",13),t.EFF(19," Edit labels "),t.k0s()()()()(),t.j41(20,"mat-drawer-content",14)(21,"div",15)(22,"div",16)(23,"div",17)(24,"button",18),t.bIt("click",function(){t.eBV(s);const c=t.sdS(3);return t.Njj(c.toggle())}),t.nrm(25,"mat-icon",19),t.k0s(),t.j41(26,"mat-form-field",20),t.nrm(27,"mat-icon",21),t.j41(28,"input",22,1),t.bIt("input",function(){t.eBV(s);const c=t.sdS(29);return t.Njj(i.filterByQuery(c.value))}),t.k0s()()(),t.j41(30,"button",23),t.bIt("click",function(){return t.eBV(s),t.Njj(i.addNewNote())}),t.nrm(31,"mat-icon",24),t.j41(32,"span",25),t.EFF(33,"New note"),t.k0s()()(),t.DNE(34,kt,2,1),t.nI1(35,"async"),t.DNE(36,jt,3,0,"div",26),t.k0s()()()()}if(2&o){let s,r;t.R7$(2),t.Y8G("mode",i.drawerMode)("opened",i.drawerOpened),t.R7$(4),t.Y8G("ngClass",t.l_i(22,F,"notes"===i.filterStatus,"notes"!==i.filterStatus))("matRippleDisabled","notes"===i.filterStatus),t.R7$(),t.Y8G("svgIcon","heroicons_outline:pencil-square"),t.R7$(3),t.Y8G("ngClass",t.l_i(25,F,"archived"===i.filterStatus,"archived"!==i.filterStatus))("matRippleDisabled","archived"===i.filterStatus),t.R7$(),t.Y8G("svgIcon","heroicons_outline:archive-box"),t.R7$(3),t.vxM((s=t.bMT(15,18,i.labels$))?14:-1,s),t.R7$(3),t.Y8G("svgIcon","heroicons_outline:pencil"),t.R7$(8),t.Y8G("svgIcon","heroicons_outline:bars-3"),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:magnifying-glass"),t.R7$(),t.Y8G("autocomplete","off")("placeholder","Search notes"),t.R7$(2),t.Y8G("color","primary"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:plus-circle"),t.R7$(3),t.vxM((r=t.bMT(35,20,i.notes$))?34:36,r)}},dependencies:[k.vg,k.qe,k.$C,k.$l,x.pZ,x.r6,f.YU,h.m_,h.An,d.Hl,d.$z,d.iY,p.RG,p.rl,p.JW,N.fS,N.fg,X,f.Jj],encapsulation:2,changeDetection:0})}}return n})();var yt=a(11593);const Ft=[{path:"",component:(()=>{class n{constructor(){}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["notes"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"router-outlet")},dependencies:[yt.n3],encapsulation:2,changeDetection:0})}}return n})(),children:[{path:"",component:$t}]}]}}]);